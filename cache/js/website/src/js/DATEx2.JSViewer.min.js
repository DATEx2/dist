export async function initJSVViewer(){const{isInView:ye,isOutOfView:be}=await import("./utils.js"),ue=()=>{};let we=ue;const Ee=j=>we=j,Re=Ee,Ie=(j,D,P)=>{P||(P=Re);const I=new Date().getTime(),k=()=>{if(new Date().getTime()-I>=D){j(),P(ue);return}const E=requestAnimationFrame(k);P(()=>cancelAnimationFrame(E))};if(D<=5){const w=requestAnimationFrame(k);P(()=>cancelAnimationFrame(w))}else setTimeout(k,D-5)};(function(j,D){var P=D()})(this,function(){return(function(j){var D={};function P(I){if(D[I])return D[I].exports;var k=D[I]={i:I,l:!1,exports:{}};return j[I].call(k.exports,k,k.exports,P),k.l=!0,k.exports}return P.m=j,P.c=D,P.d=function(I,k,w){P.o(I,k)||Object.defineProperty(I,k,{enumerable:!0,get:w})},P.r=function(I){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})},P.t=function(I,k){if(1&k&&(I=P(I)),8&k||4&k&&typeof I=="object"&&I&&I.__esModule)return I;var w=Object.create(null);if(P.r(w),Object.defineProperty(w,"default",{enumerable:!0,value:I}),2&k&&typeof I!="string")for(var E in I)P.d(w,E,function(R){return I[R]}.bind(null,E));return w},P.n=function(I){var k=I&&I.__esModule?function(){return I.default}:function(){return I};return P.d(k,"a",k),k},P.o=function(I,k){return Object.prototype.hasOwnProperty.call(I,k)},P.p="",P(P.s=5)})([function(j,D,P){"use strict";var I,k=this&&this.__extends||(I=function(E,R){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var o in c)c.hasOwnProperty(o)&&(f[o]=c[o])})(E,R)},function(E,R){function f(){this.constructor=E}I(E,R),E.prototype=R===null?Object.create(R):(f.prototype=R.prototype,new f)});Object.defineProperty(D,"__esModule",{value:!0});var w=(function(E){function R(f){var c=this;return f+=" check the documentation",(c=E.call(this,f)||this).name="360 JSV InputError",c}return k(R,E),R})(Error);D.default=w},function(j,D,P){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.mergeDeep=D.hexToRgb=D.now=D.removeEvent=D.addEvent=D.minusClient=D.plueClient=D.getAverageClient=D.getClient=D.getClients=D.getPositions=D.getDist=D.getPosition=D.getPositionEvent=D.isMultiTouch=D.getPinchDragPosition=D.getRotation=D.getRandomId=D.getRad=void 0;var I=P(12);function k(e,n){var i=n[0]-e[0],s=n[1]-e[1],l=Math.atan2(s,i);return l>=0?l:l+2*Math.PI}function w(e,n,i){var s=e.clientX,l=e.clientY;return{clientX:s,clientY:l,deltaX:s-n.clientX,deltaY:l-n.clientY,distX:s-i.clientX,distY:l-i.clientY}}function E(e){for(var n=Math.min(e.length,2),i=[],s=0;s<n;++s)i.push(R(e[s]));return i}function R(e){return{clientX:e.clientX,clientY:e.clientY}}function f(e){return e.length===1?e[0]:{clientX:(e[0].clientX+e[1].clientX)/2,clientY:(e[0].clientY+e[1].clientY)/2}}function c(e,n){return{clientX:e.clientX+n.clientX,clientY:e.clientY+n.clientY}}function o(e,n){return{clientX:e.clientX-n.clientX,clientY:e.clientY-n.clientY}}D.getRad=k,D.getRandomId=function(){return"_"+Math.random().toString(36).substr(2,3)},D.getRotation=function(e){return k([e[0].clientX,e[0].clientY],[e[1].clientX,e[1].clientY])/Math.PI*180},D.getPinchDragPosition=function(e,n,i,s){var l=f(e),m=f(n),u=f(s);return w(c(s[0],o(l,u)),c(s[0],o(m,u)),i[0])},D.isMultiTouch=function(e){return e.touches&&e.touches.length>=2},D.getPositionEvent=function(e){return e.touches?E(e.touches):[R(e)]},D.getPosition=w,D.getDist=function(e){return Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2))},D.getPositions=function(e,n,i){return e.map(function(s,l){return w(s,n[l],i[l])})},D.getClients=E,D.getClient=R,D.getAverageClient=f,D.plueClient=c,D.minusClient=o,D.addEvent=function(e,n,i,s){e.addEventListener(n,i,s)},D.removeEvent=function(e,n,i){e.removeEventListener(n,i)},D.now=function(){return Date.now?Date.now():new Date().getTime()},D.hexToRgb=function(e){var n=I(e);return n?{r:n.rgba[0],g:n.rgba[1],b:n.rgba[2],a:n.rgba[3]}:null},D.mergeDeep=function e(n){var i=n.objects,s=function(l){return l&&typeof l=="object"};return i.reduce(function(l,m){return Object.keys(m).forEach(function(u){var t=l[u],h=m[u];Array.isArray(t)&&Array.isArray(h)?l[u]=t.concat.apply(t,h):s(t)&&s(h)?l[u]=e({objects:[t,h]}):l[u]=h}),l},{})}},function(j,D){var P=/^\s+|\s+$/g,I=/^[-+]0x[0-9a-f]+$/i,k=/^0b[01]+$/i,w=/^0o[0-7]+$/i,E=parseInt,R=Object.prototype.toString;function f(o,e){var n;if(typeof e!="function")throw new TypeError("Expected a function");return o=(function(i){var s=(function(m){return m?(m=(function(u){if(typeof u=="number")return u;if((function(v){return typeof v=="symbol"||(function(C){return!!C&&typeof C=="object"})(v)&&R.call(v)=="[object Symbol]"})(u))return NaN;if(c(u)){var t=typeof u.valueOf=="function"?u.valueOf():u;u=c(t)?t+"":t}if(typeof u!="string")return u===0?u:+u;u=u.replace(P,"");var h=k.test(u);return h||w.test(u)?E(u.slice(2),h?2:8):I.test(u)?NaN:+u})(m))===1/0||m===-1/0?17976931348623157e292*(m<0?-1:1):m==m?m:0:m===0?m:0})(i),l=s%1;return s==s?l?s-l:s:0})(o),function(){return--o>0&&(n=e.apply(this,arguments)),o<=1&&(e=void 0),n}}function c(o){var e=typeof o;return!!o&&(e=="object"||e=="function")}j.exports=function(o){return f(2,o)}},function(j,D,P){"use strict";var I=this&&this.__awaiter||function(R,f,c,o){return new(c||(c=Promise))(function(e,n){function i(m){try{l(o.next(m))}catch(u){n(u)}}function s(m){try{l(o.throw(m))}catch(u){n(u)}}function l(m){var u;m.done?e(m.value):(u=m.value,u instanceof c?u:new c(function(t){t(u)})).then(i,s)}l((o=o.apply(R,f||[])).next())})},k=this&&this.__generator||function(R,f){var c,o,e,n,i={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return n={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function s(l){return function(m){return(function(u){if(c)throw new TypeError("Generator is already executing.");for(;i;)try{if(c=1,o&&(e=2&u[0]?o.return:u[0]?o.throw||((e=o.return)&&e.call(o),0):o.next)&&!(e=e.call(o,u[1])).done)return e;switch(o=0,e&&(u=[2&u[0],e.value]),u[0]){case 0:case 1:e=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,o=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(e=i.trys,!((e=e.length>0&&e[e.length-1])||u[0]!==6&&u[0]!==2)){i=0;continue}if(u[0]===3&&(!e||u[1]>e[0]&&u[1]<e[3])){i.label=u[1];break}if(u[0]===6&&i.label<e[1]){i.label=e[1],e=u;break}if(e&&i.label<e[2]){i.label=e[2],i.ops.push(u);break}e[2]&&i.ops.pop(),i.trys.pop();continue}u=f.call(R,i)}catch(t){u=[6,t],o=0}finally{c=e=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([l,m])}}};Object.defineProperty(D,"__esModule",{value:!0}),D.DomUtilities=void 0;var w=P(0),E=(function(){function R(){}return R.addHiddenStyle=function(f,c,o){return o===void 0&&(o=100),I(this,void 0,void 0,function(){var e=this;return k(this,function(n){return[2,new Promise(function(i,s){return I(e,void 0,void 0,function(){var l;return k(this,function(m){return(l=c.document.getElementById(f))===null?s():(l.classList.remove("jsv-show"),l.classList.add("jsv-hidden"),setTimeout(function(){i()},2e3)),[2]})})})]})})},R.hideImageSlow=function(f,c,o){return o===void 0&&(o=100),I(this,void 0,void 0,function(){var e=this;return k(this,function(n){return[2,new Promise(function(i,s){return I(e,void 0,void 0,function(){var l,m,u;return k(this,function(t){return f===""&&i(),(l=c.document.getElementById(f))===null?s():(m=1,u=setInterval(function(){(m-=50/o)<=0&&(clearInterval(u),m=0,l.id!="i0"&&(l.style.display="none"),i()),l.style.opacity=""+m,l.style.filter="alpha(opacity="+100*m+")"},50)),[2]})})})]})})},R.addShowStyle=function(f,c,o){return o===void 0&&(o=100),I(this,void 0,void 0,function(){var e=this;return k(this,function(n){return[2,new Promise(function(i,s){return I(e,void 0,void 0,function(){var l;return k(this,function(m){return(l=c.document.getElementById(f))===null?s():(l.classList.remove("jsv-hidden"),l.classList.add("jsv-show"),setTimeout(function(){i()},2e3)),[2]})})})]})})},R.addStyles=function(f){if(!document.getElementById("jsv-styles")){var c=f.document.createElement("style");c.id="jsv-styles",c.innerText=".jsv-hidden { opacity:0; display: none; transition: opacity .8s ease-in-out } .jsv-show {  opacity:1; display:unset; transition: opacity .8s ease-in-out } .jsv-width-100 { width: 100%; } .jsv-height-100 { height: 100%; } ",document.head.appendChild(c)}},R.hideImage=function(f,c,o,e,n){var i=c.document.getElementById(f.id),s;i&&(i.style.zIndex=1,navigator.isSafari||(navigator.isWebkit?n.hideMainElement?o.img.naturalWidth>0&&(i.parentNode.style.display="none")||(s=setInterval(l=>o.img.naturalWidth>0&&(i.parentNode.style.display="none")&&clearInterval(s),5)):s=setInterval(l=>o.img.naturalWidth>0&&(n.hideMainElement=!0)&&n?.mainImage?.img&&(n.mainImage.img.style.display="none")&&(i.parentNode.style.display="none")&&clearInterval(s),5):(i.parentNode.style.display="none")&&(n.hideMainElement||(n.hideMainElement=!0)&&(n.mainImage.img.style.display="none"))))},R.b64toBlob=(f,c="",o=512)=>{const e=atob(f),n=[];for(let s=0;s<e.length;s+=o){const l=e.slice(s,s+o),m=new Array(l.length);for(let t=0;t<l.length;t++)m[t]=l.charCodeAt(t);const u=new Uint8Array(m);n.push(u)}return new Blob(n,{type:c})},R.showImage=async function(f,c){const o=f.img;if(o)if(navigator.isSafari){const e=f.i0?.img;if(e?.style){if(e.parentNode.style.display!="block"&&(e.parentNode.style.display="block"),!f.blob){let n=function(s){const l=s.substr(23);if(!l)return s;const u=((h,v="",C=4096)=>{const N=atob(h),y=[];for(let d=0;d<N.length;d+=C){const a=N.slice(d,d+C),p=new Array(a.length);for(let S=0;S<a.length;S++)p[S]=a.charCodeAt(S);const _=new Uint8Array(p);y.push(_)}return new Blob(y,{type:v})})(l,"image/webp");return URL.createObjectURL(u)},i=f.src||f.img.style.content||getComputedStyle(f.img).content;i.startsWith('url("')&&(i=i.substring(5,i.length-2)),f.blob=i&&n(i)}f.blob&&!e.classI0&&(e.classI0=!0,e.classList.remove("i0")),e.src=f.blob}}else o?.parentNode&&(o.parentNode.style.display="block"),o&&(o.style.zIndex=2),o?.parentNode&&o.parentNode.style.removeProperty("transform")},R.getImageHolderElement=function(f,c,o,e,n){var i,s,l,m,u=f.document.createElement("div"),t=(i=e[0])!==null&&i!==void 0?i:null;if(n.autoCDNResizer&&n.zoom&&t!==null&&(!((s=n.autoCDNResizerConfig)===null||s===void 0)&&s.scaleWithZoomMax)){if(!((l=n.autoCDNResizerConfig)===null||l===void 0)&&l.useWidth){var h=t.naturalWidth;h/=n.zoomMax,u.style.maxWidth=h+"px"}if(!((m=n.autoCDNResizerConfig)===null||m===void 0)&&m.useHeight){var v=t.naturalHeight;v/=n.zoomMax,u.style.height=v+"px"}}return u.style.padding="0",u.style.margin="0",u.style.position="relative",u.style.zIndex=0,u.style.display=navigator.isWebkit?"block":"none",u.className="jsv-inner",u.id=o,u},R.removeElement=function(f){if(f!==null&&f&&f.parentNode&&f.hasChildNodes())try{f.parentNode.removeChild(f)}catch{return}},R.getMainHolderElement=function(f,c,o,e){var n=c.document.getElementById(f);if(n instanceof HTMLDivElement)return n.style.position="relative",n;throw new w.default('Could not find main holder with id "'+f+'". Did you create an element like <div id="'+f+'"></div>')},R.createLink=function(f,c){var o=f.document.createElement("a");o.title=atob("MzYwIHByb2R1Y3Qgdmlld2VyLCAzNjAgc3Bpbg=="),o.style.position="absolute",o.style.bottom="10px",o.style.right="10px",o.style.zIndex="300",o.style.color="#ccc",o.href=atob("aHR0cHM6Ly93d3cuMzYwLWphdmFzY3JpcHR2aWV3ZXIuY29t"),o.innerText=atob("MzYwIHByb2R1Y3Qgdmlld2Vy"),c.appendChild(o)},R.getImageElement=function(f,c){var o=f.img||c.document.createElement("img");return o.onload=f.onloaded,o.src=f.src,o.id=f.id,o.style.touchAction="pan-x",o.style.touchAction="pan-y",f.extraClass.length>0&&f.extraClass.split(" ").forEach(function(e){e.length>0&&o.classList.add(e.trim())}),o},R.setPointer=function(f,c){f.style.cursor=c},R.setTouchAction=function(f,c){c&&(f.style.touchAction=c)},R})();D.DomUtilities=E},function(j,D){j.exports=(function(P){var I={};function k(w){if(I[w])return I[w].exports;var E=I[w]={i:w,l:!1,exports:{}};return P[w].call(E.exports,E,E.exports,k),E.l=!0,E.exports}return k.m=P,k.c=I,k.d=function(w,E,R){k.o(w,E)||Object.defineProperty(w,E,{enumerable:!0,get:R})},k.r=function(w){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})},k.t=function(w,E){if(1&E&&(w=k(w)),8&E||4&E&&typeof w=="object"&&w&&w.__esModule)return w;var R=Object.create(null);if(k.r(R),Object.defineProperty(R,"default",{enumerable:!0,value:w}),2&E&&typeof w!="string")for(var f in w)k.d(R,f,function(c){return w[c]}.bind(null,f));return R},k.n=function(w){var E=w&&w.__esModule?function(){return w.default}:function(){return w};return k.d(E,"a",E),E},k.o=function(w,E){return Object.prototype.hasOwnProperty.call(w,E)},k.p="",k(k.s=4)})([function(P,I,k){"use strict";function w(i,s,l){return s in i?Object.defineProperty(i,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[s]=l,i}function E(i){if(Array.isArray(i)){for(var s=0,l=Array(i.length);s<i.length;s++)l[s]=i[s];return l}return Array.from(i)}Object.defineProperty(I,"__esModule",{value:!0});var R=k(1),f=k(2),c=function(){throw new Error("Slot not connected")};I.defaultSlotConfig={noBuffer:!1};var o=function(i){return Object.assign(function(){return c()},{config:i,lazy:function(){return c},on:function(){return c},slotName:"Not connected"})},e=function(i,s){return Object.keys(s).reduce(function(l,m){return l.concat(s[m][i]||[])},[])},n=function(i){return Object.keys(i).reduce(function(s,l){var m=i[l],u=Object.keys(m).filter(function(h){return(m[h]||[]).length>0}),t=[].concat(E(s),E(u));return[].concat(E(new Set(t)))},[])};I.slot=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:I.defaultSlotConfig;return o(i)},I.connectSlot=function(i,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=s.reduce(function(a,p,_){return Object.assign({},a,w({},_,{}))},w({},"LOCAL_TRANSPORT",{})),u=s.reduce(function(a,p,_){return Object.assign({},a,w({},_,{}))},{}),t=function(a,p){var _=function(){},S=new Promise(function(T){return _=T});u[a][p]={registered:S,onRegister:_}},h=[],v=[],C=function(a){return h.forEach(function(p){return p(a)})},N=function(a){return v.forEach(function(p){return p(a)})};function y(a,p){var _=arguments.length===2,S=_?p:a,T=_?a:f.DEFAULT_PARAM;if(l.noBuffer||s.length===0){var A=e(T,m);return R.callHandlers(S,A)}s.forEach(function(V,B){u[B][T]||t(String(B),T)});var F=s.reduce(function(V,B,L){return[].concat(E(V),[u[L][T].registered])},[]);return Promise.all(F).then(function(){var V=e(T,m);return R.callHandlers(S,V)})}function x(a,p){return h.push(a),v.push(p),n(m).forEach(a),function(){n(m).forEach(p);var _=h.indexOf(a);_>-1&&h.splice(_,1);var S=v.indexOf(p);S>-1&&v.splice(S,1)}}function d(a,p){var _="",S=function(){return new Promise(function(T){return T()})};return typeof a=="string"?(_=a,S=p||S):(_=f.DEFAULT_PARAM,S=a),s.forEach(function(T){return T.registerHandler(i,_,S)}),m.LOCAL_TRANSPORT[_]=(m.LOCAL_TRANSPORT[_]||[]).concat(S),e(_,m).length===1&&C(_),function(){s.forEach(function(A){return A.unregisterHandler(i,_,S)});var T=(m.LOCAL_TRANSPORT[_]||[]).indexOf(S);T!==-1&&m.LOCAL_TRANSPORT[_].splice(T,1),e(_,m).length===0&&N(_)}}return s.forEach(function(a,p){a.addRemoteHandlerRegistrationCallback(i,function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f.DEFAULT_PARAM,S=arguments[1],T=m[p][_]||[];m[p][_]=T.concat(S),e(_,m).length===1&&C(_),u[p][_]||t(String(p),_),u[p][_].onRegister()}),a.addRemoteHandlerUnregistrationCallback(i,function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f.DEFAULT_PARAM,S=arguments[1],T=m[p][_]||[],A=T.indexOf(S);A>-1&&m[p][_].splice(A,1),e(_,m).length===0&&N(_),t(String(p),_)})}),Object.assign(y,{on:d,lazy:x,config:l,slotName:i})}},function(P,I,k){"use strict";function w(E,R){var f=null;try{f=E(R)}catch(c){return Promise.reject(c)}return f&&f.then?f:Promise.resolve(f)}Object.defineProperty(I,"__esModule",{value:!0}),I.callHandlers=function(E,R){return R&&R.length!==0?R.length===1?w(R[0],E):Promise.all(R.map(function(f){return w(f,E)})):new Promise(function(f){})}},function(P,I,k){"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.DEFAULT_PARAM="$_DEFAULT_$"},function(P,I,k){"use strict";var w=(function(){function f(c,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(c,n.key,n)}}return function(c,o,e){return o&&f(c.prototype,o),e&&f(c,e),c}})();function E(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(I,"__esModule",{value:!0});var R=(function(){function f(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5e3;E(this,f),this._timeout=c,this._onMessageCallbacks=[],this._onConnectCallbacks=[],this._onDisconnectCallbacks=[],this._onErrorCallbacks=[],this._ready=!1}return w(f,[{key:"onData",value:function(c){this._onMessageCallbacks.indexOf(c)===-1&&this._onMessageCallbacks.push(c)}},{key:"onConnect",value:function(c){this._ready&&c(),this._onConnectCallbacks.push(c)}},{key:"onDisconnect",value:function(c){this._onDisconnectCallbacks.push(c)}},{key:"onError",value:function(c){this._onErrorCallbacks.push(c)}},{key:"_messageReceived",value:function(c){this._onMessageCallbacks.forEach(function(o){return o(c)})}},{key:"_error",value:function(c){this._onErrorCallbacks.forEach(function(o){return o(c)})}},{key:"_connected",value:function(){this._ready=!0,this._onConnectCallbacks.forEach(function(c){return c()})}},{key:"_disconnected",value:function(){this._ready=!1,this._onDisconnectCallbacks.forEach(function(c){return c()})}},{key:"timeout",get:function(){return this._timeout}}]),f})();I.GenericChannel=R},function(P,I,k){P.exports=k(5)},function(P,I,k){"use strict";Object.defineProperty(I,"__esModule",{value:!0});var w=k(0);I.slot=w.slot;var E=k(6);I.combineEvents=E.combineEvents,I.createEventBus=E.createEventBus;var R=k(3);I.GenericChannel=R.GenericChannel;var f=k(8);I.ChunkedChannel=f.ChunkedChannel;var c=k(2);I.DEFAULT_PARAM=c.DEFAULT_PARAM},function(P,I,k){"use strict";function w(f){if(Array.isArray(f)){for(var c=0,o=Array(f.length);c<f.length;c++)o[c]=f[c];return o}return Array.from(f)}Object.defineProperty(I,"__esModule",{value:!0});var E=k(0),R=k(7);I.combineEvents=function(f,c,o,e,n,i,s,l,m,u,t,h,v,C,N,y,x,d,a,p,_,S,T,A){var F=Array.from(arguments),V=F.reduce(function(L,G){return[].concat(w(L),w(Object.keys(G)))},[]),B=[].concat(w(new Set(V)));if(V.length>B.length)throw new Error("ts-event-bus: duplicate slots encountered in combineEvents.");return Object.assign.apply(Object,[{}].concat(w(F)))},I.createEventBus=function(f){var c=(f.channels||[]).map(function(o){return new R.Transport(o)});return Object.keys(f.events).reduce(function(o,e){var n=f.events[e].config;return o[e]=E.connectSlot(e,c,n),o},{})}},function(P,I,k){"use strict";var w=(function(){function c(o,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(o,i.key,i)}}return function(o,e,n){return e&&c(o.prototype,e),n&&c(o,n),o}})();Object.defineProperty(I,"__esModule",{value:!0});var E=k(1),R=0,f=(function(){function c(o){var e=this;(function(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")})(this,c),this._channel=o,this._localHandlers={},this._localHandlerRegistrations={},this._remoteHandlers={},this._remoteHandlerRegistrationCallbacks={},this._remoteHandlerDeletionCallbacks={},this._pendingRequests={},this._channelReady=!1,this._channel.onData(function(n){switch(n.type){case"request":return e._requestReceived(n);case"response":return e._responseReceived(n);case"handler_registered":return e._registerRemoteHandler(n);case"handler_unregistered":return e._unregisterRemoteHandler(n);case"error":return e._errorReceived(n);default:(function(i){throw new Error("Should not happen: "+i)})(n)}}),this._channel.onConnect(function(){e._channelReady=!0,Object.keys(e._localHandlerRegistrations).forEach(function(n){e._localHandlerRegistrations[n].forEach(function(i){e._channel.send(i)})})}),this._channel.onDisconnect(function(){e._channelReady=!1,e._unregisterAllRemoteHandlers(),e._rejectAllPendingRequests(new Error("REMOTE_CONNECTION_CLOSED"))}),this._channel.onError(function(n){return e._rejectAllPendingRequests(n)})}return w(c,[{key:"_requestReceived",value:function(o){var e=this,n=o.slotName,i=o.data,s=o.id,l=o.param,m=this._localHandlers[n];if(m){var u=m[l];u&&E.callHandlers(i,u).then(function(t){return e._channel.send({type:"response",slotName:n,id:s,data:t,param:l})}).catch(function(t){return e._channel.send({id:s,message:""+t,param:l,slotName:n,stack:t.stack||"",type:"error"})})}}},{key:"_responseReceived",value:function(o){var e=o.slotName,n=o.data,i=o.id,s=o.param,l=this._pendingRequests[e];l&&l[s]&&l[s][i]&&(l[s][i].resolve(n),delete l[s][i])}},{key:"_errorReceived",value:function(o){var e=o.slotName,n=o.id,i=o.message,s=o.stack,l=o.param,m=this._pendingRequests[e];if(m&&m[l]&&m[l][n]){var u=new Error(i+" on "+e+" with param "+l);u.stack=s||u.stack,this._pendingRequests[e][l][n].reject(u),delete this._pendingRequests[e][l][n]}}},{key:"_registerRemoteHandler",value:function(o){var e=this,n=o.slotName,i=o.param,s=this._remoteHandlerRegistrationCallbacks[n];if(s){var l=this._remoteHandlers[n];if(!l||!l[i]){var m=function(u){return new Promise(function(t,h){if(!e._channelReady)return h(new Error("CHANNEL_NOT_READY on "+n));var v=""+R++;e._pendingRequests[n]=e._pendingRequests[n]||{},e._pendingRequests[n][i]=e._pendingRequests[n][i]||{},e._pendingRequests[n][i][v]={resolve:t,reject:h},e._channel.send({type:"request",id:v,slotName:n,param:i,data:u}),setTimeout(function(){var C=((e._pendingRequests[n]||{})[i]||{})[v];if(C){var N=new Error("TIMED_OUT on "+n+" with param "+i);C.reject(N),delete e._pendingRequests[n][i][v]}},e._channel.timeout)})};this._remoteHandlers[n]=this._remoteHandlers[n]||{},this._remoteHandlers[n][i]=m,s(i,m)}}}},{key:"_unregisterRemoteHandler",value:function(o){var e=o.slotName,n=o.param,i=this._remoteHandlerDeletionCallbacks[e],s=this._remoteHandlers[e];if(s){var l=s[n];l&&i&&(i(n,l),delete this._remoteHandlers[e][n])}}},{key:"_unregisterAllRemoteHandlers",value:function(){var o=this;Object.keys(this._remoteHandlerDeletionCallbacks).forEach(function(e){var n=o._remoteHandlers[e];n&&Object.keys(n).filter(function(i){return n[i]}).forEach(function(i){return o._unregisterRemoteHandler({slotName:e,param:i})})})}},{key:"_rejectAllPendingRequests",value:function(o){var e=this;Object.keys(this._pendingRequests).forEach(function(n){Object.keys(e._pendingRequests[n]).forEach(function(i){Object.keys(e._pendingRequests[n][i]).forEach(function(s){e._pendingRequests[n][i][s].reject(o)})}),e._pendingRequests[n]={}})}},{key:"addRemoteHandlerRegistrationCallback",value:function(o,e){this._remoteHandlerRegistrationCallbacks[o]||(this._remoteHandlerRegistrationCallbacks[o]=e)}},{key:"addRemoteHandlerUnregistrationCallback",value:function(o,e){this._remoteHandlerDeletionCallbacks[o]||(this._remoteHandlerDeletionCallbacks[o]=e)}},{key:"registerHandler",value:function(o,e,n){if(this._localHandlers[o]=this._localHandlers[o]||{},this._localHandlers[o][e]=this._localHandlers[o][e]||[],this._localHandlers[o][e].push(n),this._localHandlers[o][e].length===1){var i={type:"handler_registered",param:e,slotName:o};this._localHandlerRegistrations[e]=this._localHandlerRegistrations[e]||[],this._localHandlerRegistrations[e].push(i),this._channelReady&&this._channel.send(i)}}},{key:"unregisterHandler",value:function(o,e,n){var i=this._localHandlers[o];if(i&&i[e]){var s=i[e].indexOf(n);if(s>-1&&(i[e].splice(s,1),i[e].length===0)){var l={type:"handler_unregistered",param:e,slotName:o};this._channelReady&&this._channel.send(l)}}}}]),c})();I.Transport=f},function(P,I,k){"use strict";var w=(function(){function e(n,i){for(var s=0;s<i.length;s++){var l=i[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,l.key,l)}}return function(n,i,s){return i&&e(n.prototype,i),s&&e(n,s),n}})(),E=function e(n,i,s){n===null&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,i);if(l===void 0){var m=Object.getPrototypeOf(n);return m===null?void 0:e(m,i,s)}if("value"in l)return l.value;var u=l.get;return u!==void 0?u.call(s):void 0};Object.defineProperty(I,"__esModule",{value:!0});var R=k(3),f=k(9),c=function(e){if(!e.chunkId)throw new Error("ChunkedMessage did not have a chunkId: "+JSON.stringify(e))},o=(function(e){function n(i){(function(l,m){if(!(l instanceof m))throw new TypeError("Cannot call a class as a function")})(this,n);var s=(function(l,m){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||typeof m!="object"&&typeof m!="function"?l:m})(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i.timeout));return s._buffer={},s._chunkSize=i.chunkSize,s._sender=i.sender,s._maxStringAlloc=i.maxStringAlloc||-1,s}return(function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);i.prototype=Object.create(s&&s.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(i,s):i.__proto__=s)})(n,e),w(n,[{key:"send",value:function(i){var s=this,l=JSON.stringify(i);if(l.length<=this._chunkSize)this._sender(i);else{var m=(function(t){for(var h=new Uint16Array(t.length),v=0,C=t.length;v<C;v++)h[v]=t.charCodeAt(v);return h})(l),u=[].concat((function(t){if(Array.isArray(t)){for(var h=0,v=Array(t.length);h<t.length;h++)v[h]=t[h];return v}return Array.from(t)})(Array(30))).map(function(){return Math.random().toString(36)[3]}).join("");this._sender({type:"chunk_start",chunkId:u,size:l.length}),(function t(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,v=m.slice(h,h+s._chunkSize);v.length&&(s._sender({type:"chunk_data",chunkId:u,data:Array.from(v)}),t(h+s._chunkSize))})(),this._sender({type:"chunk_end",chunkId:u})}}},{key:"_messageReceived",value:function(i){switch(i.type){case"chunk_start":this._receiveNewChunk(i);break;case"chunk_data":this._receiveChunkData(i);break;case"chunk_end":var s=this._mergeChunks(i);E(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_messageReceived",this).call(this,s);break;default:E(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_messageReceived",this).call(this,i)}}},{key:"_receiveNewChunk",value:function(i){if(c(i),this._buffer[i.chunkId])throw new Error("There was already an entry in the buffer for chunkId "+i.chunkId);this._buffer[i.chunkId]={id:i.chunkId,chunks:[],size:i.size}}},{key:"_receiveChunkData",value:function(i){if(c(i),!this._buffer[i.chunkId])throw new Error("ChunkId "+i.chunkId+" was not found in the buffer");this._buffer[i.chunkId].chunks.push(i.data)}},{key:"_mergeChunks",value:function(i){if(c(i),!this._buffer[i.chunkId])throw new Error("ChunkId "+i.chunkId+" was not found in the buffer");var s=this._buffer[i.chunkId].chunks.reduce(function(u,t,h){return t.forEach(function(v,C){return u.uintArray[u.currentIx+C]=v}),u.currentIx+=t.length,u},{uintArray:new Uint16Array(this._buffer[i.chunkId].size),currentIx:0}),l=void 0,m=(function(u,t){if(t===-1)return String.fromCharCode.apply(null,u);for(var h="",v=0;v<u.length;v+=t)v+t>u.length?h+=String.fromCharCode.apply(null,u.subarray(v)):h+=String.fromCharCode.apply(null,u.subarray(v,v+t));return h})(s.uintArray,this._maxStringAlloc);try{l=JSON.parse(m)}catch{throw new Error("Not a valid JSON string: "+m)}if(!f.isTransportMessage(l))throw new Error("Not a transport message: "+JSON.stringify(l));return l}}]),n})(R.GenericChannel);I.ChunkedChannel=o},function(P,I,k){"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.isTransportMessage=function(w){switch(w.type){case"request":case"response":case"error":case"handler_unregistered":case"handler_registered":return!0;default:return!1}}}])},function(j,D,P){"use strict";var I=this&&this.__awaiter||function(u,t,h,v){return new(h||(h=Promise))(function(C,N){function y(a){try{d(v.next(a))}catch(p){N(p)}}function x(a){try{d(v.throw(a))}catch(p){N(p)}}function d(a){var p;a.done?C(a.value):(p=a.value,p instanceof h?p:new h(function(_){_(p)})).then(y,x)}d((v=v.apply(u,t||[])).next())})},k=this&&this.__generator||function(u,t){var h,v,C,N,y={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]};return N={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function x(d){return function(a){return(function(p){if(h)throw new TypeError("Generator is already executing.");for(;y;)try{if(h=1,v&&(C=2&p[0]?v.return:p[0]?v.throw||((C=v.return)&&C.call(v),0):v.next)&&!(C=C.call(v,p[1])).done)return C;switch(v=0,C&&(p=[2&p[0],C.value]),p[0]){case 0:case 1:C=p;break;case 4:return y.label++,{value:p[1],done:!1};case 5:y.label++,v=p[1],p=[0];continue;case 7:p=y.ops.pop(),y.trys.pop();continue;default:if(C=y.trys,!((C=C.length>0&&C[C.length-1])||p[0]!==6&&p[0]!==2)){y=0;continue}if(p[0]===3&&(!C||p[1]>C[0]&&p[1]<C[3])){y.label=p[1];break}if(p[0]===6&&y.label<C[1]){y.label=C[1],C=p;break}if(C&&y.label<C[2]){y.label=C[2],y.ops.push(p);break}C[2]&&y.ops.pop(),y.trys.pop();continue}p=t.call(u,y)}catch(_){p=[6,_],v=0}finally{h=C=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}})([d,a])}}};Object.defineProperty(D,"__esModule",{value:!0}),D.JavascriptViewer=void 0;var w=P(6),E=P(3),R=P(1),f=P(15),c=P(4),o=P(16),e=P(17),n=P(0),i=P(18),s=P(20),l={license:"",mainImageId:"jsv-image",mainHolderId:"jsv-holder",mainImageUrl:"",totalFrames:72,imageUrls:[],speed:80,inertia:20,defaultProgressBar:!0,firstImageNumber:1,imageUrlFormat:"",startFrameNo:1,reverse:!1,autoRotate:0,autoRotateSpeed:0,autoRotateReverse:!1,enableImageEvents:!1,zoom:!1,zoomWheelSpeed:50,zoomMax:2,stopAtEdges:!1,enableChangeImageEvent:!1,cursorConfig:{default:"grab",drag:"grabbing",zoomIn:"zoom-in",zoomOut:"zoom-out",pan:"move"},touchConfig:{default:"pan-y",drag:"pan-y",zoomIn:"pan-x",zoomOut:"pan-x",pan:"pan-x"},autoCDNResizer:!1,autoCDNResizerConfig:{useWidth:!0,useHeight:!1,scaleWithZoomMax:!1},notificationConfig:{dragToRotate:{showStartToRotateDefaultNotification:!1,imageUrl:"",languages:[],mainColor:"rgba(0,0,0,0.20)",textColor:"rgba(243,237,237,0.80)"}},extraImageClass:"",id:""},m=(function(){function u(t){this.isStarted=!1,this.isDragged=!1,this.images=[],this.currentImageNumber=1,this.previousImageNumber=1,this.desiredRotationInDegrees=0,this.mainImage=null,this.mainHolderElement=null,this.uniqueId="",this.currentDegree=0,this.currentSpeed=0,this.inAnimation=!1,this.desiredRotationInDegreesStartSlowingDown=null,this.useEasing=!0,this.updateInAction=!1,this.window=null,this.startDragInvocations=0,this.firstDrag=!1,this.standbyRefreshRate=60,this.previousTargetDegree=null,this.nAutoRotations=0,this.dragAllowed=!0,this.currentPointer="default",this.currentTouch="default",this.zoomPointerTimeout=null,this.watermark=!1,this.watermark=!0,this.zoom=null,this.eventBus=u.initEventBus(),this.window=typeof window<"u"?window:null,this.options=t,this.runningInBrowser()}return f.default.f=i,u.loadConfig=function(t,h,v){return new Promise(function(C,N){if(!t||t.length<10||!h&&v&&v!=="file:")C({config:"",watermark:!0});else{var y=new XMLHttpRequest,x="https://config.3dweb.io/"+(t=t?.trim());y.onreadystatechange=function(){if(this.readyState===4&&this.status===200){var d=JSON.parse(this.responseText);if(d.config!==null)return C(d);N(new Error("could not find a presentation with id "+t))}else if(this.status!==0&&this.status!==200)switch(this.status){case 404:N(new Error("could not find a presentation with id "+t));break;case 403:N(new Error("you do not have access to presentation with id "+t));break;default:N(new Error("could not load presentation with id "+t))}},y.open("GET",x,!0),y.setRequestHeader("3dweb-host",h),y.send()}})},u.initEventBus=function(){return c.createEventBus({events:o.default,channels:[]})},u.prototype.runningInBrowser=function(){return typeof window<"u"},u.prototype.events=function(){return this.eventBus},u.prototype.setSpeed=function(t){this.currentSpeed=t>999||t<-999?999:t},u.prototype.setId=function(t){var h=this;return this.options.id=t,this.options.imageUrls=[],this.destroy().then(function(){return h.start()}).catch(function(v){console.error(v)})},u.prototype.setInertia=function(t){this.options.inertia=t>99?99:t<1?1:t},u.prototype.initProgressBar=function(){if(this.options.defaultProgressBar){this.options.mainImageId&&w.Images.blurMainImage(this.options.mainImageId,this.window);var t=w.Images.createProgressBar(this.uniqueId,this.window,this.mainHolderElement),h=new e.default(0,t.firstChild);this.eventBus.loadImage.on(function(v){h.update(v.percentage)}),this.eventBus.started.on(function(){t.style.display="none"})}},u.prototype.documentIsReady=function(){return this.window.document.readyState==="complete"},u.prototype.isB=function(){var t=new RegExp(atob("KGdvb2dsZWJvdC98Ym90fEdvb2dsZWJvdC1Nb2JpbGV8R29vZ2xlYm90LUltYWdlfEdvb2dsZSBmYXZpY29ufE1lZGlhcGFydG5lcnMtR29vZ2xlfGJpbmdib3R8c2x1cnB8amF2YXx3Z2V0fGN1cmx8Q29tbW9ucy1IdHRwQ2xpZW50fFB5dGhvbi11cmxsaWJ8bGlid3d3fGh0dHB1bml0fG51dGNofHBocGNyYXdsfG1zbmJvdHxqeXhvYm90fEZBU1QtV2ViQ3Jhd2xlcnxGQVNUIEVudGVycHJpc2UgQ3Jhd2xlcnxiaWdsb3Ryb258dGVvbWF8Y29udmVyYXxzZWVrYm90fGdpZ2FibGFzdHxleGFib3R8bmdib3R8aWFfYXJjaGl2ZXJ8R2luZ2VyQ3Jhd2xlcnx3ZWJtb24gfGh0dHJhY2t8d2ViY3Jhd2xlcnxncnViLm9yZ3xVc2luZU5vdXZlbGxlQ3Jhd2xlcnxhbnRpYm90fG5ldHJlc2VhcmNoc2VydmVyfHNwZWVkeXxmbHVmZnl8YmlibnVtLmJuZnxmaW5kbGlua3xtc3Jib3R8cGFuc2NpZW50fHlhY3lib3R8QUlTZWFyY2hCb3R8SU9JfGlwcy1hZ2VudHx0YWdvb2JvdHxNSjEyYm90fGRvdGJvdHx3b3Jpb2JvdHx5YW5nYXxidXp6Ym90fG1sYm90fHlhbmRleGJvdHxwdXJlYm90fExpbmd1ZWUgQm90fFZveWFnZXJ8Q3liZXJQYXRyb2x8dm9pbGFib3R8YmFpZHVzcGlkZXJ8Y2l0ZXNlZXJ4Ym90fHNwYm90fHR3ZW5nYWJvdHxwb3N0cmFua3x0dXJuaXRpbmJvdHxzY3JpYmRib3R8cGFnZTJyc3N8c2l0ZWJvdHxsaW5rZGV4fEFkaWR4Ym90fGJsZWtrb2JvdHxlem9vbXN8ZG90Ym90fE1haWwuUlVfQm90fGRpc2NvYm90fGhlcml0cml4fGZpbmR0aGF0ZmlsZXxldXJvcGFyY2hpdmUub3JnfE5lcmRCeU5hdHVyZS5Cb3R8c2lzdHJpeCBjcmF3bGVyfGFocmVmc2JvdHxBYm91bmRleHxkb21haW5jcmF3bGVyfHdic2VhcmNoYm90fHN1bW1pZnl8Y2Nib3R8ZWRpc3RlcmJvdHxzZXpuYW1ib3R8ZWMybGlua2ZpbmRlcnxnc2xmYm90fGFpaGl0Ym90fGludGVsaXVtX2JvdHxmYWNlYm9va2V4dGVybmFsaGl0fHlldGl8UmV0cmV2b1BhZ2VBbmFseXplcnxsYi1zcGlkZXJ8c29nb3V8bHNzYm90fGNhcmVlcmJvdHx3b3Rib3h8d29jYm90fGljaGlyb3xEdWNrRHVja0JvdHxsc3Nyb2NrZXRjcmF3bGVyfGRydXBhY3R8d2ViY29tcGFueWNyYXdsZXJ8YWNvb25ib3R8b3BlbmluZGV4c3BpZGVyfGduYW0gZ25hbSBzcGlkZXJ8d2ViLWFyY2hpdmUtbmV0LmNvbS5ib3R8YmFja2xpbmtjcmF3bGVyfGNvY2NvY3xpbnRlZ3JvbWVkYnxjb250ZW50IGNyYXdsZXIgc3BpZGVyfHRvcGxpc3Rib3R8c2Vva2lja3Mtcm9ib3R8aXQybWVkaWEtZG9tYWluLWNyYXdsZXJ8aXAtd2ViLWNyYXdsZXIuY29tfHNpdGVleHBsb3Jlci5pbmZvfGVsaXNhYm90fHByb3hpbWljfGNoYW5nZWRldGVjdGlvbnxibGV4Ym90fGFyYWJvdHxXZVNFRTpTZWFyY2h8bmlraS1ib3R8Q3J5c3RhbFNlbWFudGljc0JvdHxyb2dlcmJvdHwzNjBTcGlkZXJ8cHNib3R8SW50ZXJmYXhTY2FuQm90fExpcHBlcmhleSBTRU8gU2VydmljZXxDQyBNZXRhZGF0YSBTY2FwZXJ8ZzAwZzFlLm5ldHxHcmFwZXNob3RDcmF3bGVyfHVybGFwcGVuZGJvdHxicmFpbm9ib3R8ZnItY3Jhd2xlcnxiaW5sYXJ8U2ltcGxlQ3Jhd2xlcnxMaXZlbGFwYm90fFR3aXR0ZXJib3R8Y1hlbnNlYm90fHNtdGJvdHxibmYuZnJfYm90fEE2LUluZGV4ZXJ8QURtYW50WHxGYWNlYm90fFR3aXR0ZXJib3R8T3JhbmdlQm90fG1lbW9yeWJvdHxBZHZCb3R8TWVnYUluZGV4fFNlbWFudGljU2Nob2xhckJvdHxsdHg3MXxuZXJkeWJvdHx4b3ZpYm90fEJVYmlOR3xRd2FudGlmeXxhcmNoaXZlLm9yZ19ib3R8QXBwbGVib3R8VHdlZXRtZW1lQm90fGNyYXdsZXI0anxmaW5keGJvdHxTZW1ydXNoQm90fHlvb3pCb3R8bGlwcGVyaGV5fHkhai1hc3J8RG9tYWluIFJlLUFuaW1hdG9yIEJvdHxBZGRUaGlzKQ=="),"i"),h=this.window.navigator.userAgent;return t.test(h)},u.prototype.isLocalhost=function(){var t=this.window.location.hostname,h=this.window.location.port;return!!(t.indexOf("dev.")!==-1||t.indexOf("beta.")!==-1||t.indexOf("file")!==-1||h!==""||t==="localhost"||t==="[::1]"||t.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},u.prototype.isV=function(){if(this.options.id)return!this.watermark;var t=this.window.location.host;return s.Helper.isValid(this.options.license,t)},u.prototype.getFirstImageIndex=function(){return this.options.firstImageNumber&&this.options.firstImageNumber>0&&this.options.firstImageNumber-1<this.images.length?this.options.firstImageNumber-1:0},u.prototype.destroy=function(){return this.isInViewObserver&&(this.isInViewObserver.disconnect(),delete this.isInViewObserver),this.isOutOfViewObserver&&(this.isOutOfViewObserver.disconnect(),delete this.isOutOfViewObserver),I(this,void 0,void 0,function(){var t=this;return k(this,function(h){return[2,new Promise(function(v,C){try{if(t.isStarted){var N=t.window.document.getElementById(t.uniqueId);if(N&&E.DomUtilities.removeElement(N),t.options.defaultProgressBar){var y=t.window.document.getElementById("loader_"+t.uniqueId);E.DomUtilities.removeElement(y);var x=t.window.document.getElementById("link_"+t.uniqueId);E.DomUtilities.removeElement(x)}if(t.options.notificationConfig.dragToRotate.showStartToRotateDefaultNotification||t.options.notificationConfig.dragToRotate.imageUrl.length>0){var d=t.window.document.getElementById("notification_"+t.uniqueId);E.DomUtilities.removeElement(d)}E.DomUtilities.showImage(t.mainImage,t.window),t.isStarted=!1,t.images=[],t.mainImage=null,t.mainHolderElement=null,t.firstDrag=!1,t.eventBus=u.initEventBus(),v(!0)}else v(!1)}catch(p){var a="error with destroying viewer";p instanceof Error&&(a+=p.toString()),C(a)}})]})})},u.prototype.start=function(){this.inViewPaused=!1,this.mustExecuteOnViewResumed=null,this.onViewResumed=function(h){this.mustExecuteOnViewResumed=h};const t=document.getElementById(this.options.mainHolderId);return this.isInViewObserver=ye(t,h=>{const v=this.mustExecuteOnViewResumed;v&&(this.mustExecuteOnViewResumed=null,setTimeout(v,1)),this.inViewPaused=!1}),this.isOutOfViewObserver=be(t,h=>{this.inViewPaused=!0}),I(this,void 0,void 0,function(){var h=this;return k(this,function(v){switch(v.label){case 0:return this.documentIsReady()?[3,2]:[4,new Promise(function(C){setTimeout(function(){C()},200)}).then(function(){return h.start()})];case 1:return v.sent(),[3,3];case 2:return[2,new Promise(function(C,N){var y=h.window.location.host,x=h.window.location.protocol,d=JSON.parse(JSON.stringify(h.options));h.options=R.mergeDeep({objects:[l,h.options]}),h.options.id?u.loadConfig(h.options.id,y,x).then(function(a){h.watermark=a.watermark;var p=JSON.parse(a.config);h.options=R.mergeDeep({objects:[l,p,d]}),h.currentSpeed=h.options.speed,h.options.totalFrames=h.getTotalFrames(),h.startPresentation().then(C).catch(N)}).catch(function(a){h.handleError(a,N)}):(h.currentSpeed=h.options.speed,h.options.totalFrames=h.getTotalFrames(),h.startPresentation().then(C).catch(N))})];case 3:return[2]}})})},u.prototype.startPresentation=function(){return I(this,void 0,void 0,function(){var t=this;return k(this,function(h){return[2,new Promise(function(v,C){try{if(t.isStarted&&C("Viewer "+t.uniqueId+" already started"),t.runningInBrowser()||C("Viewer "+t.uniqueId+" not started in browser"),E.DomUtilities.addStyles(t.window),t.registerStartEvents(),t.registerInputEvents(),t.mainImage=t.options.mainImage=w.Images.getMainImage(t.options.mainImageId,t.window),t.mainImage.img.style.zIndex=2,t.mainHolderElement=E.DomUtilities.getMainHolderElement(t.options.mainHolderId,t.window,t.isB(),t.isLocalhost()),!t.isB()||t.isLocalhost()||t.isV()||E.DomUtilities.createLink(t.window,t.mainHolderElement),!t.isV()&&!t.isLocalhost()){var N=JSON.parse(JSON.stringify(t.options.notificationConfig));N.dragToRotate.mainColor="rgb(255 ,255,255)",N.dragToRotate.textColor="rgb(55, 25, 2)",t.eventBus.startDragging.on(function(y){if(y.invocations>=2){clearTimeout(t.pbto);var x=w.Images.createOrGetPoweredBy(N,t.uniqueId,t.window,t.mainHolderElement,t.isLocalhost());x!==null&&(t.pbto=setTimeout(function(){E.DomUtilities.addHiddenStyle(x.id,t.window,3e3).then(function(){E.DomUtilities.removeElement(x)})},5e3))}})}t.uniqueId=t.uniqueId||R.getRandomId(),t.imageHolderElement=E.DomUtilities.getImageHolderElement(t.window,t.mainHolderElement,t.uniqueId,[],t.options),t.mainHolderElement.appendChild(t.imageHolderElement),t.initProgressBar(),t.getImages().then(function(y){return y.forEach(x=>x.img.onload=null),I(t,void 0,void 0,function(){var x,d=this;return k(this,function(a){return this.images=y,this.prepareImageHolder(this.imageHolderElement).then(function(){return E.DomUtilities.hideImageSlow(d.mainImage.id,d.window),Promise.resolve((navigator.isWebkit?"1":y.forEach((p,_)=>p.img.parentNode.style.display=_>0?"none":"block")||1)&&!(d.mainImage.img.style.zIndex=0)&&(d.imageHolderElement.style.zIndex="1")&&(d.imageHolderElement.style.display="block")).then(function(){d.inAnimation||(E.DomUtilities.showImage(d.images[d.getFirstImageIndex()],d.window),d.currentImageNumber=d.options.firstImageNumber||1,d.previousImageNumber=d.options.firstImageNumber||1,d.setCurrentDegree(d.currentImageNumber)),d.isStarted=!0,d.eventBus.started(!0),v()}).catch(function(p){d.handleError(p,C)})}).catch(function(p){d.handleError(p,C)}),[2]})})}).catch(function(y){t.handleError(y,C)})}catch(y){t.handleError(y,C)}})]})})},u.prototype.handleError=function(t,h){var v=this,C="unknown error";t instanceof Error&&(C=t.toString(),this.reportError(C),this.destroy().then(function(){h(t.toString())}).catch(function(N){v&&v.reportError(N)})),h(C)},u.prototype.registerInputEvents=function(){var t=this;this.eventBus.pinch.on(function(h){return t.onPinchListener(h)}),this.eventBus.doubleClick.on(function(h){return t.onDoubleClickListener(h)}),this.eventBus.zoomChanged.on(function(h){return t.onZoomChangedListener(h)}),this.eventBus.scroll.on(function(h){const v=t.onScrollListener(h);return t.onZoomChanged(h),v})},u.prototype.startDragToRotateNotification=function(){w.Images.createReadyNotification(this.options.notificationConfig,this.uniqueId,this.window,this.mainHolderElement)},u.prototype.hideDragToRotateNotification=function(){var t=this;this.unsubscribe(),this.options.zoom&&this.zoomUnsubscribe(),w.Images.hideReadyNotification(this.options.notificationConfig,this.uniqueId,this.window).then(function(){var h=t.window.document.getElementById("notification_"+t.uniqueId);E.DomUtilities.removeElement(h)})},u.prototype.registerStartEvents=function(){var t=this;(this.options.notificationConfig.dragToRotate.showStartToRotateDefaultNotification||this.options.notificationConfig.dragToRotate.imageUrl.length>0)&&(this.eventBus.started.on(function(){return t.startDragToRotateNotification()}),this.unsubscribe=this.eventBus.startDragging.on(function(){return t.hideDragToRotateNotification()}),this.options.zoom&&(this.zoomUnsubscribe=this.eventBus.pinch.on(function(){return t.hideDragToRotateNotification()}),this.zoomUnsubscribe=this.eventBus.scroll.on(function(){return t.hideDragToRotateNotification()}))),this.options.zoom&&this.eventBus.started.on(function(h){return t.registerZoom(h)}),this.options.autoRotate>0&&this.eventBus.started.on(function(h){return t.runAutoRotate(h)})},u.prototype.runAutoRotate=function(t){var h=this;t?this.autoRotate(this.options.autoRotate).then(function(v){h.eventBus.endAutoRotate({currentDegree:h.currentDegree,currentImage:h.images[h.currentImageNumber-1],completed:v})}).catch(function(v){h.reportError(v)}):this.destroy().then(function(){h.reportWarning("Failed starting autorotate")}).catch(function(v){return h.reportError(v)})},u.prototype.registerZoom=function(t){t&&(this.zoom=new i.DefaultZoom(this.window,this.images,this.mainHolderElement,this.options.zoomMax))},u.prototype.onPinchListener=function(t){var h,v=this;this.options.zoom&&(this.dragAllowed=!1,(h=this.zoom)===null||h===void 0||h.pinch(t,this.images[this.currentImageNumber-1]),setTimeout(function(){v.dragAllowed=!0},1e3))},u.prototype.onZoomChangedListener=function(t){},u.prototype.onDoubleClickListener=function(t){var h,v;this.options.zoom&&(!((h=this.zoom)===null||h===void 0)&&h.isZoomed())&&((v=this.zoom)===null||v===void 0||v.reset(this.images[this.currentImageNumber-1]),this.setPointer("default"))},u.prototype.onScrollListener=function(t){var h,v,C=this;if(this.options.zoom){this.cancelCurrentActions(),this.zoomPointerTimeout&&clearTimeout(this.zoomPointerTimeout),(h=this.zoom)===null||h===void 0||h.scroll(t,this.options.zoomWheelSpeed,this.images[this.currentImageNumber-1],this);var N=t.originalEvent.deltaY;!((v=this.zoom)===null||v===void 0)&&v.isZoomed()?(N<0?this.setPointer("zoomIn"):this.setPointer("zoomOut"),this.zoomPointerTimeout=this.window.setTimeout(function(){C.setPointer("pan")},500)):this.setPointer("default")}},u.prototype.prepareImageHolder=function(t){return I(this,void 0,void 0,function(){var h,v,C,N,y,x=this;return k(this,function(d){return h=[],v=function(a,p){return I(x,void 0,void 0,function(){var _=this;return k(this,function(S){return[2,new Promise(function(T,A){for(var F=[],V=0;V<a.length;V++)F.push(p.call(_,a[V],V));Promise.all(F).then(function(B){return T(B)}).catch(function(B){return A(B)})})]})})},C=function(a,p){(x.options.zoom||x.options.enableImageEvents)&&x.addZoomEvents(a),h.push(a),x.images[p].encoded=""},N=function(a,p){return new Promise(function(_,S){var T=E.DomUtilities.getImageElement(a,x.window);C.call(x,T,p),_(!0)})},y=function(){var a,p;(x.options.zoom||x.options.enableImageEvents)&&((a=x.mainHolderElement)===null||a===void 0||a.addEventListener("wheel",x.onScroll.bind(x),{passive:!1}),(p=x.mainHolderElement)===null||p===void 0||p.addEventListener("dblclick",x.onDoubleClick.bind(x),{passive:!0})),new f.default(h,{container:x.mainHolderElement,dragstart:x.dragStart.bind(x),dragend:x.dragEnd.bind(x),drag:x.drag.bind(x),preventDefault:!1,events:["mouse","touch"]})},[2,new Promise(function(a,p){v(x.images,N).then(function(){y(),a()}).catch(function(_){p(_)})})]})})},u.prototype.addZoomEvents=function(t){var h=this;t.addEventListener("click",this.onClick.bind(this)),this.onScale(t,function(v,C,N){v>.5&&h.events().pinch({completed:!0,currentImage:h.images[h.currentImageNumber-1],currentDegree:h.currentDegree,originalEvent:N,scale:v,first:C})})},u.prototype.setPointer=function(t){if(this.currentPointer!==t){var h=this.options.cursorConfig[t];this.currentPointer=t,E.DomUtilities.setPointer(this.mainHolderElement,h)}var v=this.options.touchConfig[t];this.currentTouch!==v&&(this.currentTouch=v,E.DomUtilities.setTouchAction(this.mainHolderElement,v))},u.prototype.onScale=function(t,h){var v,C=this,N=!0,y=0,x=!1;t.addEventListener("touchmove",function(d){if(d.targetTouches.length===2){var a=Math.hypot(d.targetTouches[0].pageX-d.targetTouches[1].pageX,d.targetTouches[0].pageY-d.targetTouches[1].pageY);x=!0,h(a,N,d),v===void 0&&(v=a,N=!1)}},{capture:!1,passive:!0}),t.addEventListener("touchend",function(d){var a,p;if(v=void 0,N=!0,((a=C.zoom)===null||a===void 0?void 0:a.isZoomed())&&!x){var _=new Date().getTime(),S=_-y;clearTimeout(void 0),S<500&&S>0&&((p=C.zoom)===null||p===void 0||p.reset(C.images[C.currentImageNumber-1])),y=_}x=!1},{capture:!1,passive:!0})},u.prototype.onClick=function(t){P.show360()&&this.events().click({currentDegree:this.currentDegree,currentImage:this.images[this.currentImageNumber-1],completed:!0,originalEvent:t})},u.prototype.onScroll=function(t){const h=this.zoom.currentZoomScale;this.events().scroll({currentDegree:this.currentDegree,currentImage:this.images[this.currentImageNumber-1],completed:!0,originalEvent:t,zoom:this.zoom,currentZoomScale:h,jsv:this}),this.zoom.previousZoomScale=h},u.prototype.onDoubleClick=function(t){this.events().doubleClick({currentDegree:this.currentDegree,currentImage:this.images[this.currentImageNumber-1],completed:!0,originalEvent:t})},u.prototype.onZoomChanged=function(t){this.events().zoomChanged({currentDegree:this.currentDegree,currentImage:this.images[this.currentImageNumber-1],completed:!0,isZoomed:this.zoom.isZoomed(),zoom:this.zoom,jsv:this,originalEvent:t})},u.prototype.reportError=function(t){console.error("360 Javascript Viewer: "+t)},u.prototype.reportWarning=function(t){console.warn("360 Javascript Viewer: "+t)},u.prototype.updateImage=function(){var t=this;if(this.updateInAction=!0,this.desiredRotationInDegrees===0)return this.inAnimation=!1,this.updateInAction=!1,this.desiredRotationInDegreesStartSlowingDown=null,new Promise(function(N){N({currentDegree:t.currentDegree})});var h,v=this.getNextImageNumber();if(this.options.stopAtEdges&&!this.inAnimation){var C=this.images.length;if(this.previousImageNumber===1&&v===C||this.previousImageNumber===C&&v===1)return this.updateInAction=!1,new Promise(function(N){N({currentDegree:t.currentDegree})})}return this.setCurrentImage(v),(h=this.getCurrentRefreshRate(),new Promise(N=>this.inViewPaused?this.onViewResumed(N):Ie(N,h+(t.isDragged?0:50)))).then(function(){return t.updateImage()})},u.prototype.zoomTo=function(t,h,v,C){var N=this;return new Promise(function(y,x){var d,a;if(N.options.zoom){t>N.options.zoomMax&&x("supplied zoom factor "+t+" higher then max zoom of "+N.options.zoomMax);var p=N.images[N.currentImageNumber-1];(d=N.zoom)===null||d===void 0||d.reset(p,N,C),(a=N.zoom)===null||a===void 0||a.zoom(t,h,v,p,N,C),N.setPointer(t>1?"zoomIn":"zoomOut"),y(),N.onZoomChanged()}else x("zoom not activated")})},u.prototype.rotateDegrees=function(t){return this.inAnimation=!0,this.desiredRotationInDegrees=t,this.updateImage()},u.prototype.resetZoom=function(t){var h=this;return new Promise(function(v,C){var N;h.options.zoom||C("zoom is not activated"),(N=h.zoom)===null||N===void 0||N.reset(h.images[h.currentImageNumber-1],h,t),h.setPointer("default"),setTimeout(function(){v(),h.onZoomChanged()},500)})},u.prototype.isZoomedIn=function(){var t;return!!this.options.zoom&&!!this.zoom&&((t=this.zoom)===null||t===void 0?void 0:t.isZoomed())},u.prototype.rotateToFrame=function(t,h,v){h===void 0&&(h=!0),v===void 0&&(v=!0);var C=360/this.options.totalFrames*(t-1);return this.rotateToDegree(C,h,v)},u.prototype.rotateToDegree=function(t,h,v){var C=this;if(h===void 0&&(h=!0),v===void 0&&(v=!0),this.inAnimation=!0,this.cancelCurrentActions(),this.useEasing=v,this.desiredRotationInDegrees=0,t=Math.round(t),this.previousTargetDegree===t||t===this.currentDegree)return this.useEasing=!0,new Promise(function(x){x({currentDegree:C.currentDegree})});this.inAnimation=!0;var N=t>this.currentDegree?t-this.currentDegree:360-this.currentDegree+t,y=t<this.currentDegree?-1*(this.currentDegree-t):-1*(this.currentDegree+(360-t));return this.desiredRotationInDegrees=h&&Math.abs(y)<N?y:N,this.previousTargetDegree=t,this.updateImage()},u.prototype.cancelCurrentActions=function(){this.desiredRotationInDegrees=0,this.previousTargetDegree=null,this.nAutoRotations=0},u.prototype.dragEnd=function(){var t;this.isDragged=!1,this.options.zoom&&(!((t=this.zoom)===null||t===void 0)&&t.isZoomed())?this.setPointer("pan"):this.setPointer("default");var h=this.options.inertia/100;this.desiredRotationInDegrees+=-1*h*this.desiredRotationInDegrees},u.prototype.drag=function(t){var h,v,C;if(this.options.zoom&&(!((h=this.zoom)===null||h===void 0)&&h.isZoomed()))return t.inputEvent.targetTouches&&t.inputEvent.targetTouches&&t.inputEvent.targetTouches.length===2&&Math.hypot(t.inputEvent.targetTouches[0].pageX-t.inputEvent.targetTouches[1].pageX,t.inputEvent.targetTouches[0].pageY-t.inputEvent.targetTouches[1].pageY)<1||Math.hypot(t.deltaX,t.deltaY)<1?void 0:((v=this.zoom)===null||v===void 0||v.pan(t.deltaX,t.deltaY,this.images[this.currentImageNumber-1]),void this.setPointer("pan"));if(!(Math.abs(t.deltaY)>Math.abs(t.deltaX))){if(!this.dragAllowed||this.window.TouchEvent&&t instanceof TouchEvent&&t.touches.length===2)return!1;var N=this.getDegreesOneImage(),y=t.deltaX/((C=this.mainHolderElement)===null||C===void 0?void 0:C.clientWidth)*this.getTotalFrames()*N;return y=this.options.speed/100*y,this.options.reverse||(y*=-1),this.desiredRotationInDegrees+=y,this.updateInAction||this.updateImage(),this.setPointer("drag"),this.firstDrag&&(this.startDragInvocations++,this.eventBus.startDragging({invocations:this.startDragInvocations}),this.firstDrag=!1),this.isDragged}},u.prototype.dragStart=function(){var t;this.dragAllowed&&(this.options.zoom&&(!((t=this.zoom)===null||t===void 0)&&t.isZoomed())||(this.isDragged=!0,this.firstDrag=!0,this.setPointer("drag"),this.cancelCurrentActions()))},u.prototype.getNextImageNumber=function(){var t=this.images.length,h=this.getDegreesOneImage(),v=this.currentImageNumber;return Math.abs(this.desiredRotationInDegrees)<h?(this.viewerHasNoAction()&&(this.desiredRotationInDegrees=0),v):(v=this.desiredRotationInDegrees>0?u.increaseImageNumber(v,t):u.decreaseImageNumber(v,t),this.decreaseDesiredRotation(h),v)},u.prototype.getDegreesOneImage=function(){var t=this.images.length;return Math.round(360/t)},u.prototype.setCurrentDegree=function(t){var h=this.getDegreesOneImage();this.currentDegree=t===1?0:(t-1)*h},u.decreaseImageNumber=function(t,h){return--t<1?h:t},u.increaseImageNumber=function(t,h){return++t>h?1:t},u.prototype.decreaseDesiredRotation=function(t){t=Math.abs(t),this.desiredRotationInDegrees<0?this.desiredRotationInDegrees+=t:this.desiredRotationInDegrees-=Math.abs(t)},u.prototype.setCurrentImage=function(t){requestAnimationFrame(h=>{t=t||1,t!==this.previousImageNumber&&this.isStarted&&(E.DomUtilities.showImage(this.images[t-1],this.window),this.previousImageNumber>=0&&E.DomUtilities.hideImage(this.images[this.previousImageNumber-1],this.window,this.images[t-1],t-1,this),this.previousImageNumber=t,this.currentImageNumber=t,this.setCurrentDegree(t),this.options.enableChangeImageEvent&&this.events().changeImage({currentImage:this.images[t-1],currentDegree:this.currentDegree,completed:!0}))})},u.prototype.viewerHasNoAction=function(){return!this.isDragged},u.prototype.getImages=function(){return I(this,void 0,void 0,function(){return k(this,function(t){return[2,w.Images.getPossibleImages(this.mainHolderElement,this.mainImage,this.uniqueId,this.eventBus,this.options,this.window,this.imageHolderElement)]})})},u.prototype.getTotalFrames=function(){if(this.options.imageUrls&&this.options.imageUrls.length>0)return this.options.imageUrls.length;var t=this.options.totalFrames;if(t>0&&t<=360)return t;throw new n.default("totalFrames must be between 1 and 360 now "+t)},u.speedToRefreshRate=function(t){return(100-t)/2},u.prototype.getCurrentRefreshRate=function(){if(this.desiredRotationInDegrees===0)return this.standbyRefreshRate;if(this.viewerHasNoAction()&&this.useEasing){this.desiredRotationInDegreesStartSlowingDown||(this.desiredRotationInDegreesStartSlowingDown=Math.abs(this.desiredRotationInDegrees));var t=(1-(1-Math.abs(this.desiredRotationInDegrees)/this.desiredRotationInDegreesStartSlowingDown))*this.currentSpeed;return t=(100-this.options.inertia)/100*t,u.speedToRefreshRate(t)}return u.speedToRefreshRate(this.currentSpeed)},u.prototype.autoRotate=function(t){return I(this,void 0,void 0,function(){var h,v=this;return k(this,function(C){return this.nAutoRotations=t,h=function(N){return I(v,void 0,void 0,function(){var y,x;return k(this,function(d){switch(d.label){case 0:y=0,y=0,d.label=1;case 1:return y<this.nAutoRotations?this.isDragged||this.nAutoRotations!==t?(N&&this.setSpeed(this.options.speed),[3,4]):(y===t-1&&(this.useEasing=!0),x=this.options.autoRotateReverse?-360:360,[4,this.rotateDegrees(x)]):[3,4];case 2:d.sent(),d.label=3;case 3:return y++,[3,1];case 4:return[2,new Promise(function(a,p){a(y===t-1)})]}})})},[2,new Promise(function(N,y){v.useEasing=!1;var x=v.options.autoRotateSpeed!==v.options.speed;x&&v.setSpeed(v.options.autoRotateSpeed),h(x).then(function(){x&&v.setSpeed(v.options.speed),v.useEasing=!0,v.nAutoRotations===t?N(!0):N(!1)}).catch(function(d){v&&v.reportError(d),y()})})]})})},u})();D.JavascriptViewer=m,window.JavascriptViewer=m},function(j,D,P){"use strict";var I=this&&this.__awaiter||function(o,e,n,i){return new(n||(n=Promise))(function(s,l){function m(h){try{t(i.next(h))}catch(v){l(v)}}function u(h){try{t(i.throw(h))}catch(v){l(v)}}function t(h){var v;h.done?s(h.value):(v=h.value,v instanceof n?v:new n(function(C){C(v)})).then(m,u)}t((i=i.apply(o,e||[])).next())})},k=this&&this.__generator||function(o,e){var n,i,s,l,m={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(t){return function(h){return(function(v){if(n)throw new TypeError("Generator is already executing.");for(;m;)try{if(n=1,i&&(s=2&v[0]?i.return:v[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,v[1])).done)return s;switch(i=0,s&&(v=[2&v[0],s.value]),v[0]){case 0:case 1:s=v;break;case 4:return m.label++,{value:v[1],done:!1};case 5:m.label++,i=v[1],v=[0];continue;case 7:v=m.ops.pop(),m.trys.pop();continue;default:if(s=m.trys,!((s=s.length>0&&s[s.length-1])||v[0]!==6&&v[0]!==2)){m=0;continue}if(v[0]===3&&(!s||v[1]>s[0]&&v[1]<s[3])){m.label=v[1];break}if(v[0]===6&&m.label<s[1]){m.label=s[1],s=v;break}if(s&&m.label<s[2]){m.label=s[2],m.ops.push(v);break}s[2]&&m.ops.pop(),m.trys.pop();continue}v=e.call(o,m)}catch(C){v=[6,C],i=0}finally{n=s=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}})([t,h])}}};Object.defineProperty(D,"__esModule",{value:!0}),D.Images=void 0;var w=P(0),E=P(7),R=P(8),f=P(3),c=(function(){function o(){}return o.getFilename=function(e,n,i){if(i&&i.startsWith("data:")||i==""||i==" ")return i==" "?"":i;if(n.length===0){var s=i.split(".").pop();if(s===void 0)throw new w.default("no extension found in url: "+i+", cannot generate other filenames");var l=(e<10?"0":"")+e.toString();return i.replace("."+s,"_"+l+"."+s)}var m=this.getImagesPath(i),u=this.getImagesPath(n)||m,t=n.lastIndexOf("/")+1;if((n=n.substr(t)).toLowerCase().indexOf("????")!==-1){if(e<10)return l="000"+e.toString(),""+u+n.replace("????",l);if(e>9&&e<100)return l="00"+e.toString(),""+u+n.replace("????",l);if(e>99)return l="0"+e.toString(),""+u+n.replace("????",l)}if(n.toLowerCase().indexOf("???")!==-1){if(e<10)return l="00"+e.toString(),""+u+n.replace("???",l);if(e>9&&e<100)return l="0"+e.toString(),""+u+n.replace("???",l);if(e>99)return l=e.toString(),""+u+n.replace("???",l)}return n.toLowerCase().indexOf("??")!==-1?(l=(e<10?"0":"")+e.toString(),""+u+n.replace("??",l)):n.toLowerCase().indexOf("?")!==-1?(l=e.toString(),""+u+n.replace("?",l)):$("#jsv-image").attr("src")},o.generateImagesUrlsFromFormat=function(e,n){var i=[],s=n.startFrameNo,l=n.totalFrames,m=n.imageUrlFormat;if(e.length===0)return i;for(var u=s;l>i.length;u++)i.push(this.getFilename(u,m,e));return i},o.getPossibleImages=function(e,n,i,s,l,m,u){return I(this,void 0,void 0,function(){const t=this;var h=t;return k(this,function(v){return[2,new Promise(function(C,N){var y,x,d=[],a=0;if(l.imageUrls&&l.imageUrls.length>0)d=l.imageUrls,a=l.imageUrls.length;else{a=l.totalFrames;var p=l.imageUrls||[],_=l.mainImageUrl,S=_.length>0?_:n.src;d=p.length>0?p:h.generateImagesUrlsFromFormat(S,l)}var T=l.zoom?l.zoomMax:1,A=e.clientWidth,F=e.clientHeight,V="";l.autoCDNResizer&&l.zoom&&(!((y=l.autoCDNResizerConfig)===null||y===void 0)&&y.scaleWithZoomMax)&&(A*=T,F*=T,V=!((x=l.autoCDNResizerConfig)===null||x===void 0)&&x.useWidth?"jsv-width-100":"jsv-height-100");var B=d.map(function(G,Z){var K,ee;if(l.autoCDNResizer){var ne=new URL(G);!((K=l.autoCDNResizerConfig)===null||K===void 0)&&K.useHeight&&ne.searchParams.set("height",F.toString()),!((ee=l.autoCDNResizerConfig)===null||ee===void 0)&&ee.useWidth&&ne.searchParams.set("width",A.toString()),G=ne.toString()}const te=document.createElement("img");te.className="i"+Z;const U=document.createElement("div");if(U.style.display=Z==0||navigator.isFirefox?"block":"none",U.className="d360 d"+Z,U.append(te),u.append(U),!G&&navigator.isWebkit){const ie=getComputedStyle(te).content;te.className="p"+Z,G=ie.substring(5,ie.length-2)||l?.mainImage?.img?.src}const q={img:te,div:U,src:G,id:"i"+Z.toString(),jsv:t,options:l,mainImage:l.mainImage,mainImageId:l.mainImageId,sequence:Z,encoded:"",extraClass:l.extraImageClass+" "+V};return q.i0=l.i0||(l.i0=q),l.frames=l.frames||[],l.frames.push(q),q}),L=1;d=B.map(function(G){return G.src}),E.default(d,m,{onSingleImageComplete:function(G){if(L>B.length)return;let Z=B[L-1];Z&&(Z.encoded="",Z.naturalWidth=G?.naturalWidth,Z.naturalHeight=G?.naturalHeight,Z.onloaded=G?.onloaded),s.loadImage({fake:G.fake,onloaded:G.onloaded,currentImage:L,totalImages:a,percentage:Math.round(L/a*100),img:G.img,div:G.div,image:B[L-1]}),L++},onSingleImageFail:function(G){N(new Error("Failed loading image, are you using a good imageUrlFormat? =>"+G))}}).then(function(){L>d.length+1||(L-1===d.length?C(B):N(new Error("Not all images are loaded "+(L-1)+" from "+d.length+`. 
                    Check the warning to see the image urls we are trying to fetch`)))}).catch(function(G){N(G)})})]})})},o.getMainImage=function(e,n){var i=n.document.getElementById(e);if(i instanceof HTMLPictureElement){var s=i.querySelector("img");if(s){var l=s.src;return s.hasAttribute("data-src")&&(l=s.getAttribute("data-src")),{img:s,src:l,id:e,sequence:0,extraClass:""}}}if(i instanceof HTMLImageElement)return l=i.src,i.hasAttribute("data-src")&&(l=i.getAttribute("data-src")),{img:i,src:l,id:e,sequence:0,extraClass:""};throw new w.default('Could not find main image with id "'+e+'"')},o.getMainImageFromURl=function(e){return{src:e,id:"",sequence:0,extraClass:""}},o.getMainImageElement=function(e,n){var i=n.document.getElementById(e);if(i instanceof HTMLImageElement||i instanceof HTMLPictureElement)return i;throw new w.default('Could not find main image with id "'+e+'"')},o.blurMainImage=function(e,n){var i=n.document.getElementById(e);i instanceof HTMLImageElement&&(i.style.filter="blur(5px)")},o.hideReadyNotification=function(e,n,i){var s="notification_"+n;return f.DomUtilities.addHiddenStyle(s,i,700)},o.createOrGetPoweredBy=function(e,n,i,s,l){return null},o.createReadyNotification=function(e,n,i,s){var l=i.document.createElement("div");l.style.position="absolute",l.style.display="flex",l.style.alignItems="center",l.style.justifyContent="center",l.id="notification_"+n,l.style.zIndex="200",l.style.top="50%",l.style.left="50%",l.style.height="20%",l.style.width="20%",l.style.pointerEvents="none",l.style.transform="translate(-50%, -50%)",e.dragToRotate.showStartToRotateDefaultNotification&&(l.innerHTML=R.Notifications.getReadyForRotate(e)),!e.dragToRotate.showStartToRotateDefaultNotification&&e.dragToRotate.imageUrl.length>0&&(l.innerHTML=R.Notifications.getNotificationCustomImage(e)),s.appendChild(l)},o.createProgressBar=function(e,n,i){var s=n.document.createElement("div");s.style.display="flex",s.style.position="absolute",s.style.height="5px",s.style.width="30%",s.style.overflow="hidden",s.style.backgroundColor="#e9ecef",s.style.borderRadius="0.25rem",s.id="loader_"+e,s.style.zIndex="200",s.style.top="50%",s.style.left="50%",s.style.transform="translate(-50%, -50%)";var l=n.document.createElement("div");return l.style.backgroundColor="#6a6d71",s.appendChild(l),i.appendChild(s),s},o.getImagesPath=function(e){var n=e.replace(/^.*[\\/]/,"");return e.substring(0,e.length-n.length)},o})();D.Images=c},function(j,D,P){"use strict";var I=this&&this.__awaiter||function(E,R,f,c){return new(f||(f=Promise))(function(o,e){function n(l){try{s(c.next(l))}catch(m){e(m)}}function i(l){try{s(c.throw(l))}catch(m){e(m)}}function s(l){var m;l.done?o(l.value):(m=l.value,m instanceof f?m:new f(function(u){u(m)})).then(n,i)}s((c=c.apply(E,R||[])).next())})},k=this&&this.__generator||function(E,R){var f,c,o,e,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return e={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(e[Symbol.iterator]=function(){return this}),e;function i(s){return function(l){return(function(m){if(f)throw new TypeError("Generator is already executing.");for(;n;)try{if(f=1,c&&(o=2&m[0]?c.return:m[0]?c.throw||((o=c.return)&&o.call(c),0):c.next)&&!(o=o.call(c,m[1])).done)return o;switch(c=0,o&&(m=[2&m[0],o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,c=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!((o=o.length>0&&o[o.length-1])||m[0]!==6&&m[0]!==2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=R.call(E,n)}catch(u){m=[6,u],c=0}finally{f=o=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}})([s,l])}}},w=this&&this.__spreadArrays||function(){for(var E=0,R=0,f=arguments.length;R<f;R++)E+=arguments[R].length;var c=Array(E),o=0;for(R=0;R<f;R++)for(var e=arguments[R],n=0,i=e.length;n<i;n++,o++)c[o]=e[n];return c};Object.defineProperty(D,"__esModule",{value:!0}),D.default=function(E,R,f){return I(this,void 0,void 0,function(){var c,o,e,n=this;return k(this,function(i){return c=function(s){return I(n,void 0,void 0,function(){return k(this,function(l){return[2,new Promise(function(m,u){var t=new Image;function h(v){let C=v.target;C.naturalWidth<1?u(new Error("image ("+s+" is smaller then 10 px, probably not exist")):(f.onSingleImageComplete({img:C,result:C.src,url:s,status:200,naturalWidth:C.naturalWidth,naturalHeight:C.naturalHeight}),m())}t.src=s,t.onload=h,t.onerror=function(v){s==""?(f.onSingleImageComplete({onloaded:h,fake:!0,img:t,result:"",url:s,status:200,naturalWidth:1920,naturalHeight:1080}),m()):f.onSingleImageFail("failed loading "+s)}})]})})},o=function(s,l){for(var m=[],u=w(s),t=Math.ceil(u.length/l),h=0;h<t;h++)m.push(u.splice(0,l));return m},e=function(s){return I(n,void 0,void 0,function(){return k(this,function(l){return[2,Promise.all(s.map(c))]})})},[2,new Promise(function(s,l){var m=o(E,10),u=function(t){var h=t.shift();h!==void 0&&e(h).then(function(){m.length===0?s():u(t)}).catch(function(v){l(v)})};u(m)})]})})}},function(j,D,P){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.Notifications=void 0;var I=P(9),k=P(1),w=(function(){function E(){}return E.getNotificationCustomImage=function(R){return'<img src="'+R.dragToRotate.imageUrl+'" class="jsv-notification" />'},E.getReadyForRotate=function(R){return`<div style="display: flex; align-items: center; flex-direction: column;">
`+this.getSvg(R)+" "+this.getText(R)+"</div>"},E.getPoweredBy=function(R,f){return null},E.getMainColor=function(R){var f=k.hexToRgb(R.dragToRotate.mainColor);return f===null&&(f={r:0,g:0,b:0,a:1}),f},E.getTextColor=function(R){var f=k.hexToRgb(R.dragToRotate.textColor);return f===null&&(f={r:0,g:0,b:0,a:1}),f},E.getText=function(R){var f=I.Localisation.getDragToRotate(R),c=this.getMainColor(R),o=this.getTextColor(R);return'<div  style="text-align: center; font-size: 12px; padding:0.2em 0.5em; white-space: nowrap; color: rgba('+o.r+", "+o.g+", "+o.b+`);
 background-color: rgba(`+c.r+", "+c.g+", "+c.b+", "+c.a+`);  border-radius: 0.5em;">
<span>`+f+`</span>
</div>`},E.getLogoSvg=function(){return'<svg preserveAspectRatio="xMaxYMid meet" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" xmlns:v="https://vecta.io/nano"><path  d="M14.9.2c4.1 0 7.7 1.6 10.4 4.3s4.3 6.3 4.3 10.4-1.6 7.7-4.3 10.4-6.3 4.3-10.4 4.3S7.2 28 4.5 25.3.2 19 .2 14.9 1.9 7.2 4.5 4.5 10.9.2 14.9.2zm9.5 5.3c-2.4-2.5-5.8-4-9.5-4s-7 1.5-9.4 4-3.9 5.8-3.9 9.5 1.5 7 3.9 9.5 5.8 3.9 9.5 3.9 7-1.5 9.5-3.9 3.9-5.8 3.9-9.5-1.6-7.1-4-9.5"/><path d="M25.3 21.8c-.3.9-1.7 2.2-2.6 2.9-5.4 4.3-12.8 3.6-17.3-1.6-1.6-1.8-3.1-5.2-2.9-7.6 1.2 1.3 4 2.2 5.7 2.7 5.5 1.6 14.1 1.7 19.1-2.7 0 .6-.6 1.7-1 2.3-2.9 3.9-8 5-12.5 4.7-2.8-.2-4-.8-4.8-.9 1.1.9 3.4 1.4 4.7 1.6l3 .3c6.1-.2 7.2-1.3 8.6-1.7" fill-rule="evenodd"/><path d="M4.6 12.5c3.6 1.6 5.8 2.1 9.9 1.8 2.5-.2 5.4-.9 7.9-2.3 3.2-2 2.6-3.6 2.8-4.4 3.1 5.8-6.3 10.1-10.9 10-4.9.1-7.5-.6-11.8-2.3-.1-1.7.4-4.3 1.1-5.8C6.8 3 14.7.7 20.5 3.6c1 .5 2.7 1.5 3.2 3 1.2 4.1-6.9 6.4-9.6 6.7-3.9.5-5.9 0-9.5-.8" fill="#c40005"/></svg>'},E.getSvg=function(R){var f=this.getMainColor(R),c=this.getTextColor(R),o="rgba("+f.r+", "+f.g+", "+f.b+", "+f.a+")",e="rgba("+c.r+", "+c.g+", "+c.b+", "+c.a+")";return`<div style="max-width: 120px; width: 100%; padding: 5% 15%;">
<svg viewBox="90.63 81.107 335.724 216.946" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <clipPath id="clipPath26">
      <path d="m0 1872h2272v-1872h-2272z" id="path720"/>
    </clipPath>
  </defs>
  <g id="Layer_2">
    <g>
      <g transform="matrix(1, 0, 0, 1, 0, 31)">
        <circle fill-rule="evenodd" clip-rule="evenodd" cx="256" cy="185" r="175" fill="`+o+`" transform="matrix(0.959211, 0, 0, 0.619847, 12.934134, 43.908459)"/>
        <g id="g769" transform="matrix(11.198128, 0, 0, 11.248407, 83.541389, 67.014397)" style="">
          <g transform="matrix(0.025142, 0, 0, -0.022177, -12.123219, 30.249571)" clip-path="url(#clipPath26)" fill:"url(#linearGradient885)" id="g761" style="fill: url(#linearGradient885);">
            <g transform="translate(1368.2,787.12)" id="g731" style="fill:url(#linearGradient777)">
              <path d="m 0,0 -207.95,86.789 c -3.52,1.661 -7.664,1.32 -10.867,-0.892 -3.203,-2.217 -4.981,-5.974 -4.663,-9.859 l 3.925,-47.857 c -15.131,-0.383 -30.426,-0.563 -45.9,-0.484 -254.84,1.307 -467.33,61.883 -519.27,172.51 -1.861,-8.744 -2.841,-29.185 -2.887,-38.174 -0.735,-143.3 235.03,-260.67 526.59,-262.17 17.515,-0.089 34.825,0.254 51.899,0.996 l 4.434,-54.087 c 0.319,-3.883 2.685,-7.3 6.205,-8.967 3.521,-1.662 7.665,-1.322 10.869,0.891 l 189.15,142.47 c 3.203,2.219 4.98,5.975 4.662,9.86 -0.319,3.884 -2.685,7.301 -6.206,8.968" id="path729" style="fill:`+e+`; paint-order: stroke;"/>
            </g>
            <g transform="translate(1636.5,943.74)" id="g735" style="fill:url(#linearGradient781)">
              <path d="m 0,0 c 0.071,13.962 -2.169,39.231 -6.421,52.618 -28.864,-83.165 -148.3,-140.31 -310.08,-166.06 l 92.158,-36.446 c 3.622,-1.435 6.206,-4.691 6.778,-8.546 0.57,-3.855 -0.96,-7.72 -4.011,-10.142 l -81.037,-64.28 c 178.42,40.757 302.08,129.41 302.61,232.85" id="path733" style="fill:`+c+`; paint-order: stroke;"/>
            </g>
            <g transform="translate(749.04,1092.5)" id="g739" style="fill:url(#linearGradient785)">
              <path d="m 0,0 v 80.728 c -98.906,-34.704 -160.82,-83.963 -161.17,-138.88 -0.09,-14.262 4.092,-28.161 11.877,-41.572 12.635,48.038 67.386,67.816 149.29,99.722" id="path737" style="fill:`+e+` ; paint-order: stroke;"/>
            </g>
            <g transform="translate(1468.1,1090.1)" id="g743" style="fill:url(#linearGradient789)">
              <path d="m 0,0 c 75.974,-30.102 128.61,-46.357 145.87,-90.299 4.221,9.835 6.496,19.92 6.562,30.21 0.339,53.62 -58.025,102.36 -152.43,137.69 z" id="path741" style="fill:`+e+`; paint-order: stroke;"/>
            </g>
            <g transform="translate(780.58,981.42)" id="g747" style="fill:url(#linearGradient793)">
              <path d="m 0,0 c -16.619,0 -29.094,3.449 -41.02,7.881 l -16.618,-51.717 c 9.852,-4.933 33.238,-9.866 58.653,-9.866 73.241,0 124.66,45.32 124.66,108.37 0,30.059 -15.563,56.148 -42.584,67.478 l 0.507,0.983 c 31.166,10.849 61.274,40.888 61.274,82.257 0,32.025 -19.197,68.962 -81.53,68.962 -24.908,0 -47.784,-6.397 -58.695,-11.329 L 4.14,211.803 c 8.838,4.431 22.877,8.362 36.367,8.362 23.385,0 36.367,-11.811 36.367,-30.039 0,-33.007 -36.875,-45.32 -60.767,-45.32 H 9.341 L -0.004,96.538 h 9.345 c 26.472,0 50.914,-12.813 50.914,-44.337 C 60.255,21.68 35.813,0.003 -0.004,0.003" id="path745" style="fill:`+e+`; paint-order: stroke;"/>
            </g>
            <g transform="translate(1022.7,1054.8)" id="g751" style="fill:url(#linearGradient797)">
              <path d="m 0,0 c 1.057,2.948 2.072,6.397 3.129,9.846 7.781,17.727 23.385,30.541 36.875,30.541 17.126,0 23.892,-14.298 23.892,-32.025 0,-33.488 -11.417,-90.619 -44.148,-90.619 -17.676,0 -23.385,20.193 -23.385,40.868 0,10.848 0.55,23.161 3.637,41.389 m 15.604,-127.1 c 67.491,0 112.7,67.98 112.7,139.89 0,30.541 -14.547,72.411 -60.767,72.913 -18.691,0 -37.382,-8.383 -50.365,-22.66 h -2.114 c 19.241,45.3 51.422,73.875 92.991,82.739 6.215,1.483 11.924,2.466 18.183,2.466 l 9.346,52.699 c -5.202,0 -9.896,0 -18.692,-1.483 C 81.534,195.032 46.224,180.273 16.116,154.163 -21.816,121.156 -64.4,54.661 -64.4,-28.577 c 0,-47.285 18.734,-98.52 80.009,-98.52" id="path749" style="fill:`+e+`; paint-order: stroke;"/>
            </g>
            <g transform="translate(1309,1203.6)" id="g755" style="fill:url(#linearGradient801)">
              <path d="m 0,0 c 12.982,0 18.691,-14.779 18.691,-35.474 0,-35.955 -20.255,-188.16 -60.767,-188.16 -15.604,0 -21.313,15.28 -21.313,41.87 0,40.888 21.821,181.76 63.389,181.76 m -50.914,-275.85 c 95.062,0 132.44,137.92 132.44,231.01 0,36.938 -8.839,97.037 -75.314,97.037 -84.66,0 -131.9,-120.68 -131.9,-228.54 0,-44.317 12.983,-99.504 74.765,-99.504" id="path753" style="fill:`+e+`; paint-order: stroke;"/>
            </g>
            <g transform="translate(1442.6,1286.9)" id="g759" style="fill:url(#linearGradient805)">
              <path d="m 0,0 c 18.013,0 32.613,-15.92 32.613,-35.559 0,-19.638 -14.6,-35.558 -32.613,-35.558 -18.011,0 -32.612,15.92 -32.612,35.558 C -32.612,-15.92 -18.011,0 0,0 m 0,-91.835 c 28.506,0 51.615,25.196 51.615,56.276 0,31.081 -23.109,56.277 -51.615,56.277 -28.505,0 -51.614,-25.196 -51.614,-56.277 0,-31.08 23.109,-56.276 51.614,-56.276" id="path757" style="fill:`+e+`; paint-order: stroke;"/>
            </g>
          </g>
        </g>
      </g>
    </g>
  </g>
</svg>
</div>`},E})();D.Notifications=w},function(j,D,P){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.Localisation=void 0;var I=P(10),k=P(11),w=(function(){function E(){}return E.getDragToRotate=function(R){for(var f=I.getUserLocale(),c=0,o=R.dragToRotate.languages;c<o.length;c++){var e=o[c];if(e.language===f)return e.text}var n=this.getTranslation(f);return n===null&&(n=this.getTranslation("en")),n?.dragToRotate},E.getTranslation=function(R){for(var f=0,c=k.translations;f<c.length;f++)if((i=c[f]).language===R)return i;for(var o=R.split("-").shift(),e=0,n=k.translations;e<n.length;e++){var i;if((i=n[e]).language===o)return i}return null},E})();D.Localisation=w},function(j,D,P){"use strict";P.r(D),P.d(D,"getUserLocales",function(){return w}),P.d(D,"getUserLocale",function(){return E});var I=P(2),k=P.n(I),w=k()(function(){var R=[];return typeof window<"u"&&(window.navigator.languages&&(R=R.concat(window.navigator.languages)),window.navigator.language&&R.push(window.navigator.language),window.navigator.userLanguage&&R.push(window.navigator.userLanguage),window.navigator.browserLanguage&&R.push(window.navigator.browserLanguage),window.navigator.systemLanguage&&R.push(window.navigator.systemLanguage)),R.push("en-US"),(function(f){return f.map(function(c){if(!c||c.indexOf("-")===-1||c.toLowerCase()!==c)return c;var o=c.split("-");return"".concat(o[0],"-").concat(o[1].toUpperCase())})})(R.filter(function(f,c,o){return o.indexOf(f)===c}))}),E=k()(function(){return w()[0]});D.default=E},function(j){j.exports=JSON.parse('{"translations":[{"language":"en","dragToRotate":"Drag To Rotate"},{"language":"nl","dragToRotate":"Sleep Voor Roteren"},{"language":"es","dragToRotate":"arrastrar para rotar"},{"language":"ru","dragToRotate":"\u043F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u0432\u0435\u0440\u043D\u0443\u0442\u044C"},{"language":"fr","dragToRotate":"faire glisser pour faire pivoter"},{"language":"ch","dragToRotate":"\u62D6\u52A8\u65CB\u8F6C"},{"language":"it","dragToRotate":"trascina per ruotare"},{"language":"de","dragToRotate":"zum Drehen ziehen"},{"language":"ko","dragToRotate":"\uB4DC\uB798\uADF8\uD558\uC5EC \uD68C\uC804"},{"language":"pt","dragToRotate":"arraste para girar"}]}')},function(j,D,P){var I=P(13);j.exports=function(k){var w,E,R,f;if(w=/^((?:rgb|hs[lv]|cmyk|xyz|lab)a?)\s*\(([^\)]*)\)/.exec(k)){var c=w[1],o=(e=c.replace(/a$/,""))==="cmyk"?4:3;E=I[e],R=w[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(i,s){return/%$/.test(i)&&s===o?parseFloat(i)/100:(/%$/.test(i),parseFloat(i))}),c===e&&R.push(1),f=R[o]===void 0?1:R[o],R=R.slice(0,o),E[e]=function(){return R}}else if(/^#[A-Fa-f0-9]+$/.test(k)){var e;o=(e=k.replace(/^#/,"")).length,E=I.rgb,R=(R=e.split(o===3?/(.)/:/(..)/)).filter(Boolean).map(function(i){return parseInt(o===3?i+i:i,16)}),f=1,E.rgb=function(){return R},R[0]||(R[0]=0),R[1]||(R[1]=0),R[2]||(R[2]=0)}else(E=I.keyword).keyword=function(){return k},R=k,f=1;var n={rgb:void 0,hsl:void 0,hsv:void 0,cmyk:void 0,keyword:void 0,hex:void 0};try{n.rgb=E.rgb(R)}catch{}try{n.hsl=E.hsl(R)}catch{}try{n.hsv=E.hsv(R)}catch{}try{n.cmyk=E.cmyk(R)}catch{}try{n.keyword=E.keyword(R)}catch{}return n.rgb&&(n.hex="#"+n.rgb.map(function(i){var s=i.toString(16);return s.length===1?"0"+s:s}).join("")),n.rgb&&(n.rgba=n.rgb.concat(f)),n.hsl&&(n.hsla=n.hsl.concat(f)),n.hsv&&(n.hsva=n.hsv.concat(f)),n.cmyk&&(n.cmyka=n.cmyk.concat(f)),n}},function(j,D,P){var I=P(14),k=function(){return new c};for(var w in I){k[w+"Raw"]=(function(o){return function(e){return typeof e=="number"&&(e=Array.prototype.slice.call(arguments)),I[o](e)}})(w);var E=/(\w+)2(\w+)/.exec(w),R=E[1],f=E[2];(k[R]=k[R]||{})[f]=k[w]=(function(o){return function(e){typeof e=="number"&&(e=Array.prototype.slice.call(arguments));var n=I[o](e);if(typeof n=="string"||n===void 0)return n;for(var i=0;i<n.length;i++)n[i]=Math.round(n[i]);return n}})(w)}var c=function(){this.convs={}};c.prototype.routeSpace=function(o,e){var n=e[0];return n===void 0?this.getValues(o):(typeof n=="number"&&(n=Array.prototype.slice.call(e)),this.setValues(o,n))},c.prototype.setValues=function(o,e){return this.space=o,this.convs={},this.convs[o]=e,this},c.prototype.getValues=function(o){var e=this.convs[o];if(!e){var n=this.space,i=this.convs[n];e=k[n][o](i),this.convs[o]=e}return e},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(o){c.prototype[o]=function(e){return this.routeSpace(o,arguments)}}),j.exports=k},function(j,D){function P(y){var x,d,a=y[0]/255,p=y[1]/255,_=y[2]/255,S=Math.min(a,p,_),T=Math.max(a,p,_),A=T-S;return T==S?x=0:a==T?x=(p-_)/A:p==T?x=2+(_-a)/A:_==T&&(x=4+(a-p)/A),(x=Math.min(60*x,360))<0&&(x+=360),d=(S+T)/2,[x,100*(T==S?0:d<=.5?A/(T+S):A/(2-T-S)),100*d]}function I(y){var x,d,a=y[0],p=y[1],_=y[2],S=Math.min(a,p,_),T=Math.max(a,p,_),A=T-S;return d=T==0?0:A/T*1e3/10,T==S?x=0:a==T?x=(p-_)/A:p==T?x=2+(_-a)/A:_==T&&(x=4+(a-p)/A),(x=Math.min(60*x,360))<0&&(x+=360),[x,d,T/255*1e3/10]}function k(y){var x=y[0],d=y[1],a=y[2];return[P(y)[0],100*(1/255*Math.min(x,Math.min(d,a))),100*(a=1-1/255*Math.max(x,Math.max(d,a)))]}function w(y){var x,d=y[0]/255,a=y[1]/255,p=y[2]/255;return[100*((1-d-(x=Math.min(1-d,1-a,1-p)))/(1-x)||0),100*((1-a-x)/(1-x)||0),100*((1-p-x)/(1-x)||0),100*x]}function E(y){return C[JSON.stringify(y)]}function R(y){var x=y[0]/255,d=y[1]/255,a=y[2]/255;return[100*(.4124*(x=x>.04045?Math.pow((x+.055)/1.055,2.4):x/12.92)+.3576*(d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92)+.1805*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)),100*(.2126*x+.7152*d+.0722*a),100*(.0193*x+.1192*d+.9505*a)]}function f(y){var x=R(y),d=x[0],a=x[1],p=x[2];return a/=100,p/=108.883,d=(d/=95.047)>.008856?Math.pow(d,1/3):7.787*d+16/116,[116*(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116)-16,500*(d-a),200*(a-(p=p>.008856?Math.pow(p,1/3):7.787*p+16/116))]}function c(y){var x,d,a,p,_,S=y[0]/360,T=y[1]/100,A=y[2]/100;if(T==0)return[_=255*A,_,_];x=2*A-(d=A<.5?A*(1+T):A+T-A*T),p=[0,0,0];for(var F=0;F<3;F++)(a=S+1/3*-(F-1))<0&&a++,a>1&&a--,_=6*a<1?x+6*(d-x)*a:2*a<1?d:3*a<2?x+(d-x)*(2/3-a)*6:x,p[F]=255*_;return p}function o(y){var x=y[0]/60,d=y[1]/100,a=y[2]/100,p=Math.floor(x)%6,_=x-Math.floor(x),S=255*a*(1-d),T=255*a*(1-d*_),A=255*a*(1-d*(1-_));switch(a*=255,p){case 0:return[a,A,S];case 1:return[T,a,S];case 2:return[S,a,A];case 3:return[S,T,a];case 4:return[A,S,a];case 5:return[a,S,T]}}function e(y){var x,d,a,p,_=y[0]/360,S=y[1]/100,T=y[2]/100,A=S+T;switch(A>1&&(S/=A,T/=A),a=6*_-(x=Math.floor(6*_)),(1&x)!=0&&(a=1-a),p=S+a*((d=1-T)-S),x){default:case 6:case 0:r=d,g=p,b=S;break;case 1:r=p,g=d,b=S;break;case 2:r=S,g=d,b=p;break;case 3:r=S,g=p,b=d;break;case 4:r=p,g=S,b=d;break;case 5:r=d,g=S,b=p}return[255*r,255*g,255*b]}function n(y){var x=y[0]/100,d=y[1]/100,a=y[2]/100,p=y[3]/100;return[255*(1-Math.min(1,x*(1-p)+p)),255*(1-Math.min(1,d*(1-p)+p)),255*(1-Math.min(1,a*(1-p)+p))]}function i(y){var x,d,a,p=y[0]/100,_=y[1]/100,S=y[2]/100;return d=-.9689*p+1.8758*_+.0415*S,a=.0557*p+-.204*_+1.057*S,x=(x=3.2406*p+-1.5372*_+-.4986*S)>.0031308?1.055*Math.pow(x,1/2.4)-.055:x*=12.92,d=d>.0031308?1.055*Math.pow(d,1/2.4)-.055:d*=12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*=12.92,[255*(x=Math.min(Math.max(0,x),1)),255*(d=Math.min(Math.max(0,d),1)),255*(a=Math.min(Math.max(0,a),1))]}function s(y){var x=y[0],d=y[1],a=y[2];return d/=100,a/=108.883,x=(x/=95.047)>.008856?Math.pow(x,1/3):7.787*x+16/116,[116*(d=d>.008856?Math.pow(d,1/3):7.787*d+16/116)-16,500*(x-d),200*(d-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]}function l(y){var x,d,a,p,_=y[0],S=y[1],T=y[2];return _<=8?p=(d=100*_/903.3)/100*7.787+16/116:(d=100*Math.pow((_+16)/116,3),p=Math.pow(d/100,1/3)),[x=x/95.047<=.008856?x=95.047*(S/500+p-16/116)/7.787:95.047*Math.pow(S/500+p,3),d,a=a/108.883<=.008859?a=108.883*(p-T/200-16/116)/7.787:108.883*Math.pow(p-T/200,3)]}function m(y){var x,d=y[0],a=y[1],p=y[2];return(x=360*Math.atan2(p,a)/2/Math.PI)<0&&(x+=360),[d,Math.sqrt(a*a+p*p),x]}function u(y){return i(l(y))}function t(y){var x,d=y[0],a=y[1];return x=y[2]/360*2*Math.PI,[d,a*Math.cos(x),a*Math.sin(x)]}function h(y){return v[y]}j.exports={rgb2hsl:P,rgb2hsv:I,rgb2hwb:k,rgb2cmyk:w,rgb2keyword:E,rgb2xyz:R,rgb2lab:f,rgb2lch:function(y){return m(f(y))},hsl2rgb:c,hsl2hsv:function(y){var x=y[0],d=y[1]/100,a=y[2]/100;return a===0?[0,0,0]:[x,100*(2*(d*=(a*=2)<=1?a:2-a)/(a+d)),100*((a+d)/2)]},hsl2hwb:function(y){return k(c(y))},hsl2cmyk:function(y){return w(c(y))},hsl2keyword:function(y){return E(c(y))},hsv2rgb:o,hsv2hsl:function(y){var x,d,a=y[0],p=y[1]/100,_=y[2]/100;return x=p*_,[a,100*(x=(x/=(d=(2-p)*_)<=1?d:2-d)||0),100*(d/=2)]},hsv2hwb:function(y){return k(o(y))},hsv2cmyk:function(y){return w(o(y))},hsv2keyword:function(y){return E(o(y))},hwb2rgb:e,hwb2hsl:function(y){return P(e(y))},hwb2hsv:function(y){return I(e(y))},hwb2cmyk:function(y){return w(e(y))},hwb2keyword:function(y){return E(e(y))},cmyk2rgb:n,cmyk2hsl:function(y){return P(n(y))},cmyk2hsv:function(y){return I(n(y))},cmyk2hwb:function(y){return k(n(y))},cmyk2keyword:function(y){return E(n(y))},keyword2rgb:h,keyword2hsl:function(y){return P(h(y))},keyword2hsv:function(y){return I(h(y))},keyword2hwb:function(y){return k(h(y))},keyword2cmyk:function(y){return w(h(y))},keyword2lab:function(y){return f(h(y))},keyword2xyz:function(y){return R(h(y))},xyz2rgb:i,xyz2lab:s,xyz2lch:function(y){return m(s(y))},lab2xyz:l,lab2rgb:u,lab2lch:m,lch2lab:t,lch2xyz:function(y){return l(t(y))},lch2rgb:function(y){return u(t(y))}};var v={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},C={};for(var N in v)C[JSON.stringify(v[N])]=N},function(j,D,P){"use strict";var I=this&&this.__assign||function(){return(I=Object.assign||function(f){for(var c,o=1,e=arguments.length;o<e;o++)for(var n in c=arguments[o])Object.prototype.hasOwnProperty.call(c,n)&&(f[n]=c[n]);return f}).apply(this,arguments)},k=this&&this.__spreadArrays||function(){for(var f=0,c=0,o=arguments.length;c<o;c++)f+=arguments[c].length;var e=Array(f),n=0;for(c=0;c<o;c++)for(var i=arguments[c],s=0,l=i.length;s<l;s++,n++)e[n]=i[s];return e};Object.defineProperty(D,"__esModule",{value:!0});var w=P(1),E=["textarea","input"],R=(function(){function f(c,o){var e=this;this.dragStarted=!1,this.pinchFlag=!1,this.datas={},this.isDrag=!1,this.isPinch=!1,this.isMouse=!1,this.isTouch=!1,this.prevClients=[],this.startClients=[],this.movement=0,this.startPinchClients=[],this.startDistance=0,this.customDist=[0,0],this.targets=[],this.prevTime=0,this.isDouble=!1,this.startRotate=0,(this.show360=function(){return document.documentElement.classList.contains("jsv-show-360")})(this.onDragCancel=function(m,u){}),this.onDragStart=function(m,u){if(e.show360()&&(u===void 0&&(u=!0),m.stopPropagation(),e.dragStarted||m.cancelable)){var t=e.options,h=t.container,v=t.pinchOutside,C=t.dragstart,N=t.preventRightClick,y=t.preventDefault,x=t.checkInput;m instanceof MouseEvent&&m.preventDefault();var d=e.isTouch;if(!e.dragStarted){var a=document.activeElement,p=m.target,_=p.tagName.toLowerCase(),S=E.indexOf(_)>-1,T=p.isContentEditable;if(S||T){if(x||a===p||a&&T&&a.isContentEditable&&a.contains(p))return!1}else if((y||m.type==="touchstart")&&a){var A=a.tagName;(a.isContentEditable||E.indexOf(A)>-1)&&a.blur()}}var F=0;if(!e.dragStarted&&d&&v&&(F=setTimeout(function(){w.addEvent(h,"touchstart",e.onDragStart,{passive:!1,capture:!0})})),e.dragStarted&&d&&v&&w.removeEvent(h,"touchstart",e.onDragStart),d&&w.isMultiTouch(m)){if(clearTimeout(F),!e.dragStarted&&m.touches.length!==m.changedTouches.length)return;e.pinchFlag||e.onPinchStart(m)}if(!e.dragStarted){var V=e.startClients[0]?e.startClients:w.getPositionEvent(m);e.customDist=[0,0],e.dragStarted=!0,e.isDrag=!1,e.startClients=V,e.prevClients=V,e.datas={},e.movement=0;var B=w.getPosition(V[0],e.prevClients[0],e.startClients[0]);if(m instanceof MouseEvent&&N&&(m.which===3||m.button===2))return clearTimeout(F),e.initDrag(),!1;(C&&C(I({type:"dragstart",datas:e.datas,inputEvent:m,isTrusted:u},B)))===!1&&(clearTimeout(F),e.initDrag()),e.isDouble=w.now()-e.prevTime<200,e.dragStarted&&y&&m.preventDefault()}}},this.onPassiveEvent=function(m){m.preventDefault=function(){},m.stopPropagation=function(){},m.stopImmediatePropagation=function(){}},this.onDrag=function(m,u){if(e.show360()&&(m.stopPropagation(),!(m instanceof MouseEvent&&m.buttons===0)&&(!e.dragStarted&&m.buttons===1&&m instanceof MouseEvent&&e.onDragStart(m),e.dragStarted))){var t=w.getPositionEvent(m);e.pinchFlag&&e.onPinch(m,t);var h=e.move([0,0],m,t);if(h&&(h.deltaX||h.deltaY)){var v=e.options.drag;v&&v(I(I({},h),{isScroll:!!u,inputEvent:m}))}}},this.onDragEnd=function(m){if(e.show360()&&(m.stopPropagation(),e.dragStarted)){e.dragStarted=!1;var u=e.options,t=u.dragend,h=u.pinchOutside,v=u.container;e.isTouch&&h&&w.removeEvent(v,"touchstart",e.onDragStart),e.pinchFlag&&e.onPinchEnd(m);var C=e.prevClients,N=e.startClients,y=e.pinchFlag?w.getPinchDragPosition(C,C,N,e.startPinchClients):w.getPosition(C[0],C[0],N[0]),x=w.now(),d=!e.isDrag&&e.isDouble;e.prevTime=e.isDrag||d?0:x,e.startClients=[],e.prevClients=[],t&&t(I({type:"dragend",datas:e.datas,isDouble:d,isDrag:e.isDrag,inputEvent:m},y))}},this.options=I({checkInput:!1,container:c.length>1?typeof window<"u"?window:new HTMLDivElement:c[0],preventRightClick:!0,preventDefault:!0,pinchThreshold:0,pinch:this.pinch,pinchstart:this.pinchstart},o);var n=this.options,i=n.container,s=n.events;if(this.isTouch=s.indexOf("touch")>-1,this.isMouse=s.indexOf("mouse")>-1,this.customDist=[0,0],this.targets=c,this.isMouse&&(w.addEvent(i,"mousedown",this.onDragStart,{capture:!0}),w.addEvent(i,"mousemove",this.onDrag,{capture:!0}),w.addEvent(i,"mouseleave",this.onDragEnd,{capture:!1}),w.addEvent(i,"mouseup",this.onDragEnd,{capture:!1}),w.addEvent(i,"contextmenu",this.onDragEnd,{capture:!1})),this.isTouch){var l={passive:!1,capture:!1};c.forEach(function(m){w.addEvent(m,"touchstart",e.onDragStart,l)}),w.addEvent(i,"touchstart",this.onPassiveEvent,l),w.addEvent(i,"touchstart",e.onDragStart,l),w.addEvent(i,"touchmove",this.onDrag,l),w.addEvent(i,"touchend",this.onDragEnd,l),w.addEvent(i,"touchcancel",this.onDragEnd,l)}}return f.prototype.move=function(c,o,e){var n=c[0],i=c[1];e===void 0&&(e=this.prevClients),o.stopPropagation();var s=this.customDist,l=this.prevClients,m=this.startClients,u=this.pinchFlag?w.getPinchDragPosition(e,l,m,this.startPinchClients):w.getPosition(e[0],l[0],m[0]);s[0]+=n,s[1]+=i,u.deltaX+=n,u.deltaY+=i;var t=u.deltaX,h=u.deltaY;return u.distX+=s[0],u.distY+=s[1],this.movement+=Math.sqrt(t*t+h*h),this.prevClients=e,this.isDrag=!0,I(I({type:"drag",datas:this.datas},u),{movement:this.movement,isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:o})},f.prototype.onPinchStart=function(c){var o,e;c.stopPropagation();var n=this.options,i=n.pinchstart,s=n.pinchThreshold;if(!(this.isDrag&&this.movement>s)){var l=w.getClients(c.changedTouches);if(this.pinchFlag=!0,(o=this.startClients).push.apply(o,l),(e=this.prevClients).push.apply(e,l),this.startDistance=w.getDist(this.prevClients),this.startPinchClients=k(this.prevClients),i){var m=this.prevClients,u=w.getAverageClient(m),t=w.getPosition(u,u,u);this.startRotate=w.getRotation(m),i(I(I({type:"pinchstart",datas:this.datas,angle:this.startRotate,touches:w.getPositions(m,m,m)},t),{inputEvent:c}))}}},f.prototype.onPinch=function(c,o){if(this.dragStarted&&this.pinchFlag&&!(o.length<2)){this.isPinch=!0;var e=this.options.pinch;if(e){var n=this.prevClients,i=this.startClients,s=w.getPosition(w.getAverageClient(o),w.getAverageClient(n),w.getAverageClient(i)),l=w.getRotation(o),m=w.getDist(o);e(I(I({type:"pinch",datas:this.datas,movement:this.movement,angle:l,rotation:l-this.startRotate,touches:w.getPositions(o,n,i),scale:m/this.startDistance,distance:m},s),{inputEvent:c}))}}},f.prototype.onPinchEnd=function(c){if(this.dragStarted&&this.pinchFlag){var o=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var e=this.options.pinchend;if(e){var n=this.prevClients,i=this.startClients,s=w.getPosition(w.getAverageClient(n),w.getAverageClient(n),w.getAverageClient(i));e(I(I({type:"pinchend",datas:this.datas,isPinch:o,touches:w.getPositions(n,n,i)},s),{inputEvent:c})),this.isPinch=!1,this.pinchFlag=!1}}else this.isPinch=!1,this.pinchFlag=!1},f.prototype.triggerDragStart=function(c){this.onDragStart(c,!1)},f.prototype.unset=function(){var c=this,o=this.targets,e=this.options.container;this.isMouse&&(o.forEach(function(n){w.removeEvent(n,"mousedown",c.onDragStart)}),w.removeEvent(e,"mousemove",this.onDrag),w.removeEvent(e,"mouseup",this.onDragEnd),w.removeEvent(e,"contextmenu",this.onDragEnd)),this.isTouch&&(o.forEach(function(n){w.removeEvent(n,"touchstart",c.onDragStart)}),w.removeEvent(e,"touchstart",this.onDragStart),w.removeEvent(e,"touchmove",this.onDrag),w.removeEvent(e,"touchend",this.onDragEnd),w.removeEvent(e,"touchcancel",this.onDragEnd))},f.prototype.initDrag=function(){this.startClients=[],this.prevClients=[],this.dragStarted=!1},f})();D.default=R},function(j,D,P){"use strict";Object.defineProperty(D,"__esModule",{value:!0});var I=P(4),k={loadImage:I.slot(),started:I.slot(),startDragging:I.slot(),changeImage:I.slot(),endAutoRotate:I.slot(),click:I.slot(),pinch:I.slot(),scroll:I.slot(),doubleClick:I.slot(),zoomChanged:I.slot()};D.default=k},function(j,D,P){"use strict";Object.defineProperty(D,"__esModule",{value:!0});var I=(function(){function k(w,E){this.bar=E,this.p=w,this.refresh()}return k.prototype.refresh=function(){this.bar.style.width=this.p+"%"},k.prototype.update=function(w){this.p=w,this.refresh()},k})();D.default=I},function(j,D,P){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.DefaultZoom=void 0;var I=P(19),k=(function(){function w(E,R,f,c){this.panzoomLoaded=!1,this.currentZoomScale=1,this.previousPinchDistance=0,this.screenX=0,this.screenY=0,this.window=E,this.images=R,this.mainHolderElement=f,this.zoomMax=c,this.initPanZoom()}return w.prototype.initPanZoom=function(){var E=this;this.images.forEach(function(R,f){var c,o=(c=E.window)===null||c===void 0?void 0:c.document.getElementById(""+R.id);o&&(E.images[f].pz=E.getMobilePanzoom(o,E))}),this.panzoomLoaded=!0},w.prototype.handleZoom=function(E,R,f,c,o,e,n){var i=this;o===void 0&&(o=!1);var s=!1;this.currentZoomScale+E>this.zoomMax&&(E=this.zoomMax-this.currentZoomScale),this.currentZoomScale<1&&E<0||this.currentZoomScale+E>this.zoomMax&&E>0||(this.currentZoomScale+=E,this.currentZoomScale<1.3&&E<0&&(R=0,f=0,s=!0,o=!0,this.previousPinchDistance=0,this.currentZoomScale=1),[navigator.isSafari?c.i0:c].forEach(function(l){var m,u;s?(u=l.pz)===null||u===void 0||u.reset({animate:!0},n):(m=l.pz)===null||m===void 0||m.zoom(i.currentZoomScale,{animate:!0,focal:{x:R,y:f}},n)}))},w.prototype.handlePan=function(E,R){this.images.forEach(function(f){var c;(c=f.pz)===null||c===void 0||c.pan(E,R,{relative:!0,animate:!1})})},w.prototype.getMobilePanzoom=function(E,R){return I.default(E,{cursor:"",maxScale:this.zoomMax,minScale:1,startX:0,startY:0,animate:!1,canvas:!1,noBind:!0,disablePan:!1,easing:"ease",panOnlyWhenZoomed:!0,touchAction:"",jsv:R})},w.prototype.getRelativePosition=function(E,R,f){var c,o=0,e=0,n=(c=this.mainHolderElement)===null||c===void 0?void 0:c.getBoundingClientRect();if(n){var i=this.window.pageXOffset+n?.left,s=this.window.pageYOffset+n?.top;return o=Math.round(E-i-n.width/2),e=Math.round(R-s-(n.height-n.height/2)),[o*this.currentZoomScale*2,e*this.currentZoomScale*2]}return[o,e]},w.prototype.pinch=function(E,R){var f;if(this.panzoomLoaded){E.originalEvent.cancelBubble=!0;var c=(f=this.mainHolderElement)===null||f===void 0?void 0:f.getBoundingClientRect(),o=Math.sqrt(c.width*c.width+c.height*c.height),e=E.scale/o;if(E.first||this.previousPinchDistance===0)this.previousPinchDistance=e;else{this.screenX=(E.originalEvent.targetTouches[0].pageX+E.originalEvent.targetTouches[1].pageX)/2,this.screenY=(E.originalEvent.targetTouches[0].pageY+E.originalEvent.targetTouches[1].pageY)/2;var n=e-this.previousPinchDistance;n*=4;var i=this.getRelativePosition(this.screenX,this.screenY,R),s=i[0],l=i[1];this.handleZoom(n,s,l,R),this.previousPinchDistance=e}}},w.prototype.scroll=function(E,R,f,c){var o=E.originalEvent.deltaY>0?-1:1;o*=R/100;var e=E.originalEvent,n=this.getRelativePosition(e.pageX,e.pageY,f),i=n[0],s=n[1];this.handleZoom(o,i,s,f,E,c)},w.prototype.isZoomed=function(){return this.currentZoomScale>1},w.prototype.pan=function(E,R){this.handlePan(E,R)},w.prototype.reset=function(E,R,f){this.handleZoom(-1*(this.currentZoomScale-1),0,0,E,!0,R,f)},w.prototype.zoomOnPage=function(E,R,f,c){if(!(E>this.zoomMax)){var o=this.getRelativePosition(R,f,c),e=o[0],n=o[1];this.handleZoom(E-this.currentZoomScale,e,n,c)}},w.prototype.zoom=function(E,R,f,c,o,e){var n,i;if(!(E>this.zoomMax)){var s=this.window.document.getElementById(c.id);if(s){this.currentZoomScale=E;var l=R!==0?R*s.clientWidth/this.currentZoomScale:0,m=f!==0?f*s.clientHeight/this.currentZoomScale:0;(n=c.pz)===null||n===void 0||n.pan(l,m,{animate:!0}),(i=c.pz)===null||i===void 0||i.zoom(this.currentZoomScale,{animate:!0},e)}}},w})();D.DefaultZoom=k},function(j,D,P){"use strict";P.r(D);var I=function(){return(I=Object.assign||function(d){for(var a,p=1,_=arguments.length;p<_;p++)for(var S in a=arguments[p])Object.prototype.hasOwnProperty.call(a,S)&&(d[S]=a[S]);return d}).apply(this,arguments)};function k(d,a){for(var p=d.length;p--;)if(d[p].pointerId===a.pointerId)return p;return-1}function w(d,a){var p;if(a.touches){p=0;for(var _=0,S=a.touches;_<S.length;_++){var T=S[_];T.pointerId=p++,w(d,T)}}else(p=k(d,a))>-1&&d.splice(p,1),d.push(a)}function E(d){for(var a,p=(d=d.slice(0)).pop();a=d.pop();)p={clientX:(a.clientX-p.clientX)/2+p.clientX,clientY:(a.clientY-p.clientY)/2+p.clientY};return p}function R(d){if(d.length<2)return 0;var a=d[0],p=d[1];return Math.sqrt(Math.pow(Math.abs(p.clientX-a.clientX),2)+Math.pow(Math.abs(p.clientY-a.clientY),2))}typeof window<"u"&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window.CustomEvent!="function"&&(window.CustomEvent=function(d,a){a=a||{bubbles:!1,cancelable:!1,detail:null};var p=document.createEvent("CustomEvent");return p.initCustomEvent(d,a.bubbles,a.cancelable,a.detail),p}));var f={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};function c(d,a,p,_){f[d].split(" ").forEach(function(S){a.addEventListener(S,p,_)})}function o(d,a,p){f[d].split(" ").forEach(function(_){a.removeEventListener(_,p)})}typeof window<"u"&&(typeof window.PointerEvent=="function"?f={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:typeof window.TouchEvent=="function"&&(f={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));var e,n=typeof document<"u"&&!!document.documentMode;function i(){return e||(e=document.createElement("div").style)}var s=["webkit","moz","ms"],l={};function m(d){if(l[d])return l[d];var a=i();if(d in a)return l[d]=d;for(var p=d[0].toUpperCase()+d.slice(1),_=s.length;_--;){var S=""+s[_]+p;if(S in a)return l[d]=S}}function u(d,a){return parseFloat(a[m(d)])||0}function t(d,a,p){p===void 0&&(p=window.getComputedStyle(d));var _=a==="border"?"Width":"";return{left:u(a+"Left"+_,p),right:u(a+"Right"+_,p),top:u(a+"Top"+_,p),bottom:u(a+"Bottom"+_,p)}}function h(d,a,p,_){d.style.setProperty(m(a),p,_)}function v(d){var a=d.parentNode,p=window.getComputedStyle(d),_=window.getComputedStyle(a),S=d.getBoundingClientRect(),T=a.getBoundingClientRect();return{elem:{style:p,width:S.width,height:S.height,top:S.top,bottom:S.bottom,left:S.left,right:S.right,margin:t(d,"margin",p),border:t(d,"border",p)},parent:{style:_,width:T.width,height:T.height,top:T.top,bottom:T.bottom,left:T.left,right:T.right,padding:t(a,"padding",_),border:t(a,"border",_)}}}function C(d,a){return d.nodeType===1&&(" "+(function(p){return(p.getAttribute("class")||"").trim()})(d)+" ").indexOf(" "+a+" ")>-1}var N=/^http:[\w\.\/]+svg$/,y={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(d){d.preventDefault(),d.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,relative:!1,setTransform:function(d,a,p){var _=a.x,S=a.y,T=a.scale,A=a.isSVG;if(d.parentNode.style.display!="none"){const V=T>1||_!=0||S!=0;V!=y.isScaled&&(y.isScaled=V,setTimeout(B=>document.documentElement.classList.toggle("jsv-360-scaled",V),V?0:300))}if(h(d.parentNode,"transform",(T==1?"":"scale("+T+")")+(_==0&&S==0?"":" translate("+_+"px, "+S+"px)")),A&&n){var F=window.getComputedStyle(d.parentNode).getPropertyValue("transform");d.parentNode.setAttribute("transform",F)}},startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function x(d,a){if(!d)throw new Error("Panzoom requires an element as an argument");if(d.nodeType!==1)throw new Error("Panzoom requires an element with a nodeType of 1");if(!(function(M){var H=M.ownerDocument,O=M.parentNode;return H&&O&&H.nodeType===9&&O.nodeType===1&&H.documentElement.contains(O)})(d))throw new Error("Panzoom should be called on elements that have been attached to the DOM");a=I(I({},y),a);var p=(function(M){return N.test(M.namespaceURI)&&M.nodeName.toLowerCase()!=="svg"})(d),_=d.parentNode;_.style.overflow=a.overflow,_.style.touchAction=a.touchAction,(a.canvas?_:d).style.cursor=a.cursor,d.style.touchAction=a.touchAction;var S,T,A,F,V,B,L=0,G=0,Z=M=>M===void 0?a.jsv.currentZoomScale:a.jsv.currentZoomScale=M,K=!1;function ee(M,H,O){if(!O.silent){var z=new CustomEvent(M,{detail:H});d.dispatchEvent(z)}}function ne(M,H){var O={x:L,y:G,scale:Z(),isSVG:p};return requestAnimationFrame(function(){typeof H.animate=="boolean"&&(H.animate?(function(z,Y){h(z.parentNode.parentNode,"transition",m("all")+" "+Y.duration+"ms "+Y.easing,"important")})(d,H):h(d.parentNode.parentNode,"transition","all 200ms "+M.easing,"important")),H.setTransform(d.parentNode,O,H)}),ee(M,O,H),ee("panzoomchange",O,H),O}function te(){if(a.contain){var M=v(d),H=M.parent.width-M.parent.border.left-M.parent.border.right,O=M.parent.height-M.parent.border.top-M.parent.border.bottom,z=H/(M.elem.width/Z()),Y=O/(M.elem.height/Z());a.contain==="inside"?a.maxScale=Math.min(z,Y):a.contain==="outside"&&(a.minScale=Math.max(z,Y))}}function U(M,H,O,z){var Y=I(I({},a),z),W={x:L,y:G,opts:Y};if(!Y.force&&(Y.disablePan||Y.panOnlyWhenZoomed&&Z()===Y.startScale))return W;if(M=parseFloat(M),H=parseFloat(H),Y.disableXAxis||(W.x=(Y.relative?L:0)+M),Y.disableYAxis||(W.y=(Y.relative?G:0)+H),Y.contain==="inside"){var X=v(d);W.x=Math.max(-X.elem.margin.left-X.parent.padding.left,Math.min(X.parent.width-X.elem.width/O-X.parent.padding.left-X.elem.margin.left-X.parent.border.left-X.parent.border.right,W.x)),W.y=Math.max(-X.elem.margin.top-X.parent.padding.top,Math.min(X.parent.height-X.elem.height/O-X.parent.padding.top-X.elem.margin.top-X.parent.border.top-X.parent.border.bottom,W.y))}else if(Y.contain==="outside"){var J=(X=v(d)).elem.width/Z(),re=X.elem.height/Z(),ge=J*O,me=re*O,pe=(ge-J)/2,ve=(me-re)/2,xe=(-(ge-X.parent.width)-X.parent.padding.left-X.parent.border.left-X.parent.border.right+pe)/O,ke=(pe-X.parent.padding.left)/O;W.x=Math.max(Math.min(W.x,ke),xe);var _e=(-(me-X.parent.height)-X.parent.padding.top-X.parent.border.top-X.parent.border.bottom+ve)/O,Ce=(ve-X.parent.padding.top)/O;W.y=Math.max(Math.min(W.y,Ce),_e)}return W}function q(M,H){var O=I(I({},a),H),z={scale:Z(),opts:O};return!O.force&&O.disableZoom||(z.scale=Math.min(Math.max(M,O.minScale),O.maxScale)),z}function ie(M,H,O){var z=U(M,H,Z(),O),Y=z.opts;return L=z.x,G=z.y,ne("panzoompan",Y)}function oe(M,H,O){var z=q(M,H),Y=z.opts;if(O!=null&&(Y.duration=O),Y.force||!Y.disableZoom){M=z.scale;var W=L,X=G;if(Y.focal){var J=Y.focal;W=(J.x/M-J.x/Z()+L*M)/M,X=(J.y/M-J.y/Z()+G*M)/M}var re=U(W,X,M,{relative:!1,force:!0});return L=re.x,G=re.y,Z(M),ne("panzoomzoom",Y)}}function le(M,H){var O=I(I(I({},a),{animate:!0}),H);return oe(Z()*Math.exp((M?1:-1)*O.step),O)}function ae(M,H,O){var z=v(d),Y=z.parent.width-z.parent.padding.left-z.parent.padding.right-z.parent.border.left-z.parent.border.right,W=z.parent.height-z.parent.padding.top-z.parent.padding.bottom-z.parent.border.top-z.parent.border.bottom,X=H.clientX-z.parent.left-z.parent.padding.left-z.parent.border.left-z.elem.margin.left,J=H.clientY-z.parent.top-z.parent.padding.top-z.parent.border.top-z.elem.margin.top;p||(X-=z.elem.width/Z()/2,J-=z.elem.height/Z()/2);var re={x:X/Y*(Y*M),y:J/W*(W*M)};return oe(M,I(I({animate:!1},O),{focal:re}))}oe(a.startScale,{animate:!1}),setTimeout(function(){te(),ie(a.startX,a.startY,{animate:!1})});var Q=[];function ce(M){if(!(function(O,z){for(var Y=O;Y!=null;Y=Y.parentNode)if(C(Y,z.excludeClass)||z.exclude.indexOf(Y)>-1)return!0;return!1})(M.target,a)){w(Q,M),K=!0,a.handleStartEvent(M),S=L,T=G,ee("panzoomstart",{x:L,y:G,scale:Z()},a);var H=E(Q);A=H.clientX,F=H.clientY,V=Z(),B=R(Q)}}function de(M){if(K&&S!==void 0&&T!==void 0&&A!==void 0&&F!==void 0){w(Q,M);var H=E(Q);Q.length>1&&ae(q((R(Q)-B)*a.step/80+V).scale,H),ie(S+(H.clientX-A)/Z(),T+(H.clientY-F)/Z(),{animate:!1})}}function he(M){Q.length===1&&ee("panzoomend",{x:L,y:G,scale:Z()},a),(function(H,O){if(O.touches)for(;H.length;)H.pop();else{var z=k(H,O);z>-1&&H.splice(z,1)}})(Q,M),K&&(K=!1,S=T=A=F=void 0)}var se=!1;function fe(){se||(se=!0,c("down",a.canvas?_:d,ce),c("move",document,de,{passive:!0}),c("up",document,he,{passive:!0}))}return a.noBind||fe(),{bind:fe,destroy:function(){se=!1,o("down",a.canvas?_:d,ce),o("move",document,de),o("up",document,he)},eventNames:f,getPan:function(){return{x:L,y:G}},getScale:function(){return Z()},getOptions:function(){return(function(M){var H={};for(var O in M)M.hasOwnProperty(O)&&(H[O]=M[O]);return H})(a)},pan:ie,reset:function(M,H){var O=I(I(I({},a),{animate:!0,force:!0}),M);H!=null&&(O.duration=H),Z(q(O.startScale,O).scale);var z=U(O.startX,O.startY,Z(),O);return L=z.x,G=z.y,ne("panzoomreset",O)},setOptions:function(M){for(var H in M===void 0&&(M={}),M)M.hasOwnProperty(H)&&(a[H]=M[H]);M.hasOwnProperty("cursor")&&(d.style.cursor=M.cursor),M.hasOwnProperty("overflow")&&(_.style.overflow=M.overflow),M.hasOwnProperty("touchAction")&&(_.style.touchAction=M.touchAction,d.style.touchAction=M.touchAction),(M.hasOwnProperty("minScale")||M.hasOwnProperty("maxScale")||M.hasOwnProperty("contain"))&&te()},setStyle:function(M,H){return h(d,M,H)},zoom:oe,zoomIn:function(M){return le(!0,M)},zoomOut:function(M){return le(!1,M)},zoomToPoint:ae,zoomWithWheel:function(M,H){M.preventDefault();var O=I(I({},a),H),z=(M.deltaY===0&&M.deltaX?M.deltaX:M.deltaY)<0?1:-1;return ae(q(Z()*Math.exp(z*O.step/3),O).scale,M,O)}}}x.defaultOptions=y,D.default=x},function(j,D,P){"use strict";Object.defineProperty(D,"__esModule",{value:!0}),D.Helper=void 0;var I=(function(){function k(){}return k.isValid=function(w,E){E=E.toLowerCase().split("").reverse().join("");var R=parseInt(w.charAt(0),10),f=w.split("=="),c=parseInt(f[0].charAt(f[0].length-1),10);return f[0].substr(1,f[0].length-2)===this.reverse(E,2*c)&&R+c===10},k.reverse=function(w,E){var R="ABCDEFGHIJKLMNOPQRSTUVWXYZ".toLowerCase(),f="";E>26&&(E%=26);for(var c=0;c<w.length;){if(R.indexOf(w[c])!==-1){var o=R.indexOf(w[c]);R[o+E]?f+=R[o+E]:f+=R[o+E-26]}c++}return f},k})();D.Helper=I}])})}
