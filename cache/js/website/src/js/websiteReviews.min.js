import{$ as i,$d as a,$w as h,d as f,notOnceOnly as n,onceOnly as p,isInOutOfView as g,lazyCSS as m}from"./utils.js";function c(){a.is(".page-type-SITE")&&(location.hash=="#reviews"&&i("#tile-text-xEZ4QK")[0]?.scrollIntoView(smooth),location.hash=="#contact"&&i("#tile-location-BBYesn")[0]?.scrollIntoView(smooth))}export function injectReviews(d){const v={},x=D.lang.toLowerCase();d.type=="SITE"&&(a.arrive('.ins-header__menu-link-title[href="#contact"], .ins-header__menu-link-title[href="#reviews"]',{existing:!0,onceOnly:!1},t=>{t.addEventListener("click",s=>{setTimeout(c,10)})}),a.arrive(".es-review-content-text, .bwqEnm, .gqjyBj, .dnAvMj, .dqiKFy, .bwqEnm",n,t=>{const s=i(t),e=s.text(),o=w.reviews?.[e]||e;v[e]={},e!=o&&s.text(o)}),location.patched||(location.pathed=!0,h.on("popstate",c)),a.arrive("#tile-location-BBYesn",n,t=>{i(t).attr("name","contact")}),a.arrive("#tile-text-xEZ4QK",n,t=>{const s=i(t);s.is(".five-star-revews")||(s.attr("name","reviews"),t.arrive("#tile-text-xEZ4QK .ins-tile__title",n,e=>{const o=i(e);o.text(o.text()?.replace(/5/gi,"")?.replace(/\*\*\*\*\*/gi,"")),(location.hash=="#tile-text-xEZ4QK"||location.hash=="#reviews")&&e.scrollIntoView(smooth)})),t.arrive(".ins-tile__description",n,e=>{g(e,(o,l)=>{if(a.toggleClass("show-reviews",l.isInView),l.isInView&&!window.reviewsLoaded){var r=i("<script/>");r[0].addEventListener("load",u=>{window.reviewsLoaded=!0,i(e).wrap('<div class="loading"/>').html(`<div class="website-reviews"><div lang="${a.attr("lang")}" class="elfsight-app-bd1067c4-c177-4330-8b54-5ec616880eb4" data-elfsight-app-lazy></div></div>`),f.arrive(".es-embed-root",p,y=>{setTimeout(E=>i(".website-reviews").toggleClass("loaded",!0),1)})}),r.attr({id:"js-reviews",lang:a.attr("lang"),src:"https://static.elfsight.com/platform/platform.js",defer:"defer","data-use-service-core":"data-use-service-core"}),m().appendChild(r[0])}})})}))}export default{injectReviews};
