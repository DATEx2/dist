//!https://d1tqsoh7s4xjz9.cloudfront.net/v2/i.min.js
(l=>{var c=!!(c=l.EcHeap)&&c.constructor+""=="String"&&((c=l.EcHeap)?c.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):"")||"eca",y=l[c]?.q||[];let _=document.currentScript?.getAttribute("eca-domain")||"https://ecomm.events";if(_){let b=function(e){return`PSec__storefront__ab__test__${e}PSec__storefront__ab__test`},h=function(e){if(p.hasOwnProperty(e))return p[e].apply(p,arguments);try{console.warn("Can't send action",e)}catch{}},w=function(e){try{var n=b(e);return localStorage.getItem(n)}catch{return null}},S=function(){try{return localStorage.getItem(a.platformId)}catch{return null}},g=function(){let e=Math.floor(Math.pow(10,6)*Math.random())+"";for(e=e.substring(0,6);e.length<6;)e="0"+e;return+new Date+""+e},a={visitorId:"__eca_v_id_",sessionId:"__eca_s_id_",platformId:"__eca_p_id_"},p=new function(){let e={},n={visitorId:{name:"visitorId",type:"number"},sessionId:{name:"sessionId",type:"number"},platformId:{name:"platformId",type:"string"},allowCookies:{name:"allowCookies",type:"boolean"},verbose:{name:"verbose",type:"boolean"}};return k(!1),d(!1),I((()=>{try{return localStorage.getItem(a.visitorId)}catch{return null}})()),f((()=>{try{return localStorage.getItem(a.sessionId)}catch{return null}})()),m(S()),e.send=function(){(function(){var t=arguments[1];l.navigator.sendBeacon&&(C(e.sessionId)&&v(),t.sessionId=e.sessionId,t.storefrontAbTest=(o=>{if(e.abTestData!=null)try{var i;w(o)==null&&(i=b(o),localStorage.setItem(i,JSON.stringify(e.abTestData)))}catch(s){console.warn("Error getting AB test data from storage",s)}else{o=w(o);let s={};try{s=JSON.parse(o)}catch{s=null}(s=s==null||s.group!=null&&s.name!=null?s:null)!=null&&(20<s.group.length||50<s.name.length)&&(s=null),e.abTestData=s}return e.abTestData})(t.storeId),(o=>(o=o.substring(0,o.length-6),31536e6<Date.now()-o))(e.visitorId)&&D(),t.visitorId=e.visitorId,setTimeout(o=>l.navigator.sendBeacon(_+"/register",JSON.stringify(t)),1e3),r("send",t))}).apply(null,arguments)},e.config=function(){(function(t,o){switch(r("config",t+"="+o),t){case n.visitorId.name:o!=null&&typeof o!==n.visitorId.type||I(o);break;case n.platformId.name:o!=null&&typeof o!==n.platformId.type||m(o);break;case n.sessionId.name:o!=null&&typeof o!==n.sessionId.type||f(o);break;case n.allowCookies.name:typeof o===n.allowCookies.type&&d(o);break;case n.verbose.name:typeof o===n.verbose.type&&k(o);break;case"revokeCookies":r("revokeCookies"),d(!1),Object.values(a).forEach(T),I(null),f(null)}}).apply(null,[].slice.call(arguments,1))},e.get=function(){return function(t){if(t in n)return e[n[t].name]}.apply(null,[].slice.call(arguments,1))},e;function d(t){(e.allowCookies=t)&&(I(e.visitorId),f(e.sessionId),m(e.platformId))}function I(t){r("updateVisitorId",t),t==null?D():e.visitorId=u(a.visitorId,t),l.analytics_visitorId=e.visitorId}function m(t){r("updatePlatformId",t),t==null?(r("resetPlatformId"),e.platformId=S()):e.platformId=u(a.platformId,t)}function f(t){r("updateSessionId",t),t==null?v():e.sessionId=u(a.sessionId,t),e.sessionId&&!C(e.sessionId)||v()}function k(t){e.verbose=t}function C(t){return t=t.substring(0,t.length-6),18e5<Date.now()-t}function v(){r("resetSession"),e.sessionId=u(a.sessionId,g())}function D(){r("resetVisitorId"),e.visitorId=u(a.visitorId,g())}function u(t,o){if(o=o||g(),e.allowCookies)try{r("localStorage.setItem",t+"="+o),localStorage.setItem(t,o)}catch(i){r("initStorage error",i)}return o}function T(t){r("removeStorage",t);try{localStorage.removeItem(t)}catch(o){r("removeStorage error",o)}}function r(t,o){var i;e&&e.verbose&&(i={visitorId:e.visitorId,sessionId:e.sessionId,allowCookies:e.allowCookies,platformId:e.platformId},console.log(t,i,o))}};l[c]=h;for(let e=0;e<y.length;e++)h.apply(null,[].slice.call(y[e]))}else console.warn("eca-domain is not defined")})(window);export default window;
