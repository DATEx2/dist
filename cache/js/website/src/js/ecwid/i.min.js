//!https://d1tqsoh7s4xjz9.cloudfront.net/v2/i.min.js
((m) => {
  var e = !!(e = m.EcHeap) && e.constructor + "" == "String" && ((e = m.EcHeap) ? e.replace(/^[\s\xa0]+|[\s\xa0]+$/g, "") : "") || "eca", o = m[e]?.q || [];
  let g = document.currentScript?.getAttribute("eca-domain") || "https://ecomm.events";
  if (g) {
    let v = function(e2) {
      return `PSec__storefront__ab__test__${e2}PSec__storefront__ab__test`;
    }, n = function(e2) {
      if (t.hasOwnProperty(e2))
        return t[e2].apply(t, arguments);
      try {
        console.warn("Can't send action", e2);
      } catch (e3) {
      }
    }, y = function(e2) {
      try {
        var t2 = v(e2);
        return localStorage.getItem(t2);
      } catch (e3) {
        return null;
      }
    }, _ = function() {
      try {
        return localStorage.getItem(p.platformId);
      } catch (e2) {
        return null;
      }
    }, b = function() {
      let e2 = Math.floor(Math.pow(10, 6) * Math.random()) + "";
      for (e2 = e2.substring(0, 6); e2.length < 6; )
        e2 = "0" + e2;
      return +/* @__PURE__ */ new Date() + "" + e2;
    };
    let p = {
      visitorId: "__eca_v_id_",
      sessionId: "__eca_s_id_",
      platformId: "__eca_p_id_"
    }, t = new function() {
      let n2 = {}, o2 = {
        visitorId: {
          name: "visitorId",
          type: "number"
        },
        sessionId: {
          name: "sessionId",
          type: "number"
        },
        platformId: {
          name: "platformId",
          type: "string"
        },
        allowCookies: {
          name: "allowCookies",
          type: "boolean"
        },
        verbose: {
          name: "verbose",
          type: "boolean"
        }
      };
      return i(false), r(false), s((() => {
        try {
          return localStorage.getItem(p.visitorId);
        } catch (e2) {
          return null;
        }
      })()), l((() => {
        try {
          return localStorage.getItem(p.sessionId);
        } catch (e2) {
          return null;
        }
      })()), a(_()), n2.send = function() {
        !function() {
          var e2 = arguments[1];
          m.navigator.sendBeacon && (t2(n2.sessionId) && c(), e2.sessionId = n2.sessionId, e2.storefrontAbTest = ((e3) => {
            if (null != n2.abTestData)
              try {
                var t3;
                null == y(e3) && (t3 = v(e3), localStorage.setItem(t3, JSON.stringify(n2.abTestData)));
              } catch (e4) {
                console.warn("Error getting AB test data from storage", e4);
              }
            else {
              e3 = y(e3);
              let t4 = {};
              try {
                t4 = JSON.parse(e3);
              } catch (e4) {
                t4 = null;
              }
              null != (t4 = null == t4 || null != t4.group && null != t4.name ? t4 : null) && (20 < t4.group.length || 50 < t4.name.length) && (t4 = null), n2.abTestData = t4;
            }
            return n2.abTestData;
          })(e2.storeId), ((e3) => (e3 = e3.substring(0, e3.length - 6), 31536e6 < Date.now() - e3))(n2.visitorId) && u(), e2.visitorId = n2.visitorId, setTimeout((t3) => m.navigator.sendBeacon(g + "/register", JSON.stringify(e2)), 1e3), f("send", e2));
        }.apply(null, arguments);
      }, n2.config = function() {
        !function(e2, t3) {
          switch (f("config", e2 + "=" + t3), e2) {
            case o2.visitorId.name:
              null != t3 && typeof t3 !== o2.visitorId.type || s(t3);
              break;
            case o2.platformId.name:
              null != t3 && typeof t3 !== o2.platformId.type || a(t3);
              break;
            case o2.sessionId.name:
              null != t3 && typeof t3 !== o2.sessionId.type || l(t3);
              break;
            case o2.allowCookies.name:
              typeof t3 === o2.allowCookies.type && r(t3);
              break;
            case o2.verbose.name:
              typeof t3 === o2.verbose.type && i(t3);
              break;
            case "revokeCookies":
              f("revokeCookies"), r(false), Object.values(p).forEach(I), s(null), l(null);
          }
        }.apply(null, [].slice.call(arguments, 1));
      }, n2.get = function() {
        return function(e2) {
          if (e2 in o2)
            return n2[o2[e2].name];
        }.apply(null, [].slice.call(arguments, 1));
      }, n2;
      function r(e2) {
        (n2.allowCookies = e2) && (s(n2.visitorId), l(n2.sessionId), a(n2.platformId));
      }
      function s(e2) {
        f("updateVisitorId", e2), null == e2 ? u() : n2.visitorId = d(p.visitorId, e2), m.analytics_visitorId = n2.visitorId;
      }
      function a(e2) {
        f("updatePlatformId", e2), null == e2 ? (f("resetPlatformId"), n2.platformId = _()) : n2.platformId = d(p.platformId, e2);
      }
      function l(e2) {
        f("updateSessionId", e2), null == e2 ? c() : n2.sessionId = d(p.sessionId, e2), n2.sessionId && !t2(n2.sessionId) || c();
      }
      function i(e2) {
        n2.verbose = e2;
      }
      function t2(e2) {
        e2 = e2.substring(0, e2.length - 6);
        return 18e5 < Date.now() - e2;
      }
      function c() {
        f("resetSession"), n2.sessionId = d(p.sessionId, b());
      }
      function u() {
        f("resetVisitorId"), n2.visitorId = d(p.visitorId, b());
      }
      function d(e2, t3) {
        if (t3 = t3 || b(), n2.allowCookies)
          try {
            f("localStorage.setItem", e2 + "=" + t3), localStorage.setItem(e2, t3);
          } catch (e3) {
            f("initStorage error", e3);
          }
        return t3;
      }
      function I(e2) {
        f("removeStorage", e2);
        try {
          localStorage.removeItem(e2);
        } catch (e3) {
          f("removeStorage error", e3);
        }
      }
      function f(e2, t3) {
        var o3;
        n2 && n2.verbose && (o3 = {
          visitorId: n2.visitorId,
          sessionId: n2.sessionId,
          allowCookies: n2.allowCookies,
          platformId: n2.platformId
        }, console.log(e2, o3, t3));
      }
    }();
    m[e] = n;
    for (let e2 = 0; e2 < o.length; e2++)
      n.apply(null, [].slice.call(o[e2]));
  } else
    console.warn("eca-domain is not defined");
})(window);
export default window;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiZmlsZTovLy9EOi93b3JrL0RBVEV4Mi5iaWtlL3d3My93ZWJzaXRlL3NyYy9qcy9lY3dpZC9pLm1pbi5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8haHR0cHM6Ly9kMXRxc29oN3M0eGp6OS5jbG91ZGZyb250Lm5ldC92Mi9pLm1pbi5qc1xuKG0gPT4ge1xuICAgIHZhciBlID0gISEoZSA9IG0uRWNIZWFwKSAmJiBlLmNvbnN0cnVjdG9yICsgXCJcIiA9PSBcIlN0cmluZ1wiICYmICgoZSA9IG0uRWNIZWFwKSA/IGUucmVwbGFjZSgvXltcXHNcXHhhMF0rfFtcXHNcXHhhMF0rJC9nLCBcIlwiKSA6IFwiXCIpIHx8IFwiZWNhXCJcbiAgICAgICwgbyA9IG1bZV0/LnEgfHwgW107XG4gICAgbGV0IGcgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0Py5nZXRBdHRyaWJ1dGUoXCJlY2EtZG9tYWluXCIpIHx8IFwiaHR0cHM6Ly9lY29tbS5ldmVudHNcIjtcbiAgICBpZiAoZykge1xuICAgICAgICBsZXQgcCA9IHtcbiAgICAgICAgICAgIHZpc2l0b3JJZDogXCJfX2VjYV92X2lkX1wiLFxuICAgICAgICAgICAgc2Vzc2lvbklkOiBcIl9fZWNhX3NfaWRfXCIsXG4gICAgICAgICAgICBwbGF0Zm9ybUlkOiBcIl9fZWNhX3BfaWRfXCJcbiAgICAgICAgfVxuICAgICAgICAgICwgdCA9IG5ldyBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGxldCBuID0ge31cbiAgICAgICAgICAgICAgLCBvID0ge1xuICAgICAgICAgICAgICAgIHZpc2l0b3JJZDoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInZpc2l0b3JJZFwiLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXNzaW9uSWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzZXNzaW9uSWRcIixcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGxhdGZvcm1JZDoge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtSWRcIixcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWxsb3dDb29raWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiYWxsb3dDb29raWVzXCIsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYm9vbGVhblwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2ZXJib3NlOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwidmVyYm9zZVwiLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJvb2xlYW5cIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gaSghMSksXG4gICAgICAgICAgICByKCExKSxcbiAgICAgICAgICAgIHMoKCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKHAudmlzaXRvcklkKVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICApKCkpLFxuICAgICAgICAgICAgbCgoICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0ocC5zZXNzaW9uSWQpXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICkoKSksXG4gICAgICAgICAgICBhKF8oKSksXG4gICAgICAgICAgICBuLnNlbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAhZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlID0gYXJndW1lbnRzWzFdO1xuICAgICAgICAgICAgICAgICAgICBtLm5hdmlnYXRvci5zZW5kQmVhY29uICYmICh0KG4uc2Vzc2lvbklkKSAmJiBjKCksXG4gICAgICAgICAgICAgICAgICAgIGUuc2Vzc2lvbklkID0gbi5zZXNzaW9uSWQsXG4gICAgICAgICAgICAgICAgICAgIGUuc3RvcmVmcm9udEFiVGVzdCA9IChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IG4uYWJUZXN0RGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PSB5KGUpICYmICh0ID0gdihlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odCwgSlNPTi5zdHJpbmdpZnkobi5hYlRlc3REYXRhKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvciBnZXR0aW5nIEFCIHRlc3QgZGF0YSBmcm9tIHN0b3JhZ2VcIiwgZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0geShlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBKU09OLnBhcnNlKGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9ICh0ID0gbnVsbCA9PSB0IHx8IG51bGwgIT0gdC5ncm91cCAmJiBudWxsICE9IHQubmFtZSA/IHQgOiBudWxsKSAmJiAoMjAgPCB0Lmdyb3VwLmxlbmd0aCB8fCA1MCA8IHQubmFtZS5sZW5ndGgpICYmICh0ID0gbnVsbCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5hYlRlc3REYXRhID0gdFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uYWJUZXN0RGF0YVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICkoZS5zdG9yZUlkKSxcbiAgICAgICAgICAgICAgICAgICAgKGUgPT4gKGUgPSBlLnN1YnN0cmluZygwLCBlLmxlbmd0aCAtIDYpLFxuICAgICAgICAgICAgICAgICAgICAzMTUzNmU2IDwgRGF0ZS5ub3coKSAtIGUpKShuLnZpc2l0b3JJZCkgJiYgdSgpLFxuICAgICAgICAgICAgICAgICAgICBlLnZpc2l0b3JJZCA9IG4udmlzaXRvcklkLFxuXHRcdFx0XHRcdHNldFRpbWVvdXQodCA9PiBtLm5hdmlnYXRvci5zZW5kQmVhY29uKGcgKyBcIi9yZWdpc3RlclwiLCBKU09OLnN0cmluZ2lmeShlKSksIDEwMDApLFxuICAgICAgICAgICAgICAgICAgICBmKFwic2VuZFwiLCBlKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLmFwcGx5KG51bGwsIGFyZ3VtZW50cylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICxcbiAgICAgICAgICAgIG4uY29uZmlnID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgIWZ1bmN0aW9uKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChmKFwiY29uZmlnXCIsIGUgKyBcIj1cIiArIHQpLFxuICAgICAgICAgICAgICAgICAgICBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2Ugby52aXNpdG9ySWQubmFtZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gdCAmJiB0eXBlb2YgdCAhPT0gby52aXNpdG9ySWQudHlwZSB8fCBzKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2Ugby5wbGF0Zm9ybUlkLm5hbWU6XG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IHQgJiYgdHlwZW9mIHQgIT09IG8ucGxhdGZvcm1JZC50eXBlIHx8IGEodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBvLnNlc3Npb25JZC5uYW1lOlxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSB0ICYmIHR5cGVvZiB0ICE9PSBvLnNlc3Npb25JZC50eXBlIHx8IGwodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBvLmFsbG93Q29va2llcy5uYW1lOlxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHQgPT09IG8uYWxsb3dDb29raWVzLnR5cGUgJiYgcih0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIG8udmVyYm9zZS5uYW1lOlxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHQgPT09IG8udmVyYm9zZS50eXBlICYmIGkodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJldm9rZUNvb2tpZXNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGYoXCJyZXZva2VDb29raWVzXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcighMSksXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKHApLmZvckVhY2goSSksXG4gICAgICAgICAgICAgICAgICAgICAgICBzKG51bGwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbChudWxsKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC5hcHBseShudWxsLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAsXG4gICAgICAgICAgICBuLmdldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlIGluIG8pXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbltvW2VdLm5hbWVdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC5hcHBseShudWxsLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAsXG4gICAgICAgICAgICBuO1xuICAgICAgICAgICAgZnVuY3Rpb24gcihlKSB7XG4gICAgICAgICAgICAgICAgKG4uYWxsb3dDb29raWVzID0gZSkgJiYgKHMobi52aXNpdG9ySWQpLFxuICAgICAgICAgICAgICAgIGwobi5zZXNzaW9uSWQpLFxuICAgICAgICAgICAgICAgIGEobi5wbGF0Zm9ybUlkKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIHMoZSkge1xuICAgICAgICAgICAgICAgIGYoXCJ1cGRhdGVWaXNpdG9ySWRcIiwgZSksXG4gICAgICAgICAgICAgICAgbnVsbCA9PSBlID8gdSgpIDogbi52aXNpdG9ySWQgPSBkKHAudmlzaXRvcklkLCBlKSxcbiAgICAgICAgICAgICAgICBtLmFuYWx5dGljc192aXNpdG9ySWQgPSBuLnZpc2l0b3JJZFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gYShlKSB7XG4gICAgICAgICAgICAgICAgZihcInVwZGF0ZVBsYXRmb3JtSWRcIiwgZSksXG4gICAgICAgICAgICAgICAgbnVsbCA9PSBlID8gKGYoXCJyZXNldFBsYXRmb3JtSWRcIiksXG4gICAgICAgICAgICAgICAgbi5wbGF0Zm9ybUlkID0gXygpKSA6IG4ucGxhdGZvcm1JZCA9IGQocC5wbGF0Zm9ybUlkLCBlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gbChlKSB7XG4gICAgICAgICAgICAgICAgZihcInVwZGF0ZVNlc3Npb25JZFwiLCBlKSxcbiAgICAgICAgICAgICAgICBudWxsID09IGUgPyBjKCkgOiBuLnNlc3Npb25JZCA9IGQocC5zZXNzaW9uSWQsIGUpLFxuICAgICAgICAgICAgICAgIG4uc2Vzc2lvbklkICYmICF0KG4uc2Vzc2lvbklkKSB8fCBjKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGkoZSkge1xuICAgICAgICAgICAgICAgIG4udmVyYm9zZSA9IGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIHQoZSkge1xuICAgICAgICAgICAgICAgIGUgPSBlLnN1YnN0cmluZygwLCBlLmxlbmd0aCAtIDYpO1xuICAgICAgICAgICAgICAgIHJldHVybiAxOGU1IDwgRGF0ZS5ub3coKSAtIGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGMoKSB7XG4gICAgICAgICAgICAgICAgZihcInJlc2V0U2Vzc2lvblwiKSxcbiAgICAgICAgICAgICAgICBuLnNlc3Npb25JZCA9IGQocC5zZXNzaW9uSWQsIGIoKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIHUoKSB7XG4gICAgICAgICAgICAgICAgZihcInJlc2V0VmlzaXRvcklkXCIpLFxuICAgICAgICAgICAgICAgIG4udmlzaXRvcklkID0gZChwLnZpc2l0b3JJZCwgYigpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gZChlLCB0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHQgPSB0IHx8IGIoKSxcbiAgICAgICAgICAgICAgICBuLmFsbG93Q29va2llcylcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYoXCJsb2NhbFN0b3JhZ2Uuc2V0SXRlbVwiLCBlICsgXCI9XCIgKyB0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGUsIHQpXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYoXCJpbml0U3RvcmFnZSBlcnJvclwiLCBlKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIEkoZSkge1xuICAgICAgICAgICAgICAgIGYoXCJyZW1vdmVTdG9yYWdlXCIsIGUpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGUpXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBmKFwicmVtb3ZlU3RvcmFnZSBlcnJvclwiLCBlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGYoZSwgdCkge1xuICAgICAgICAgICAgICAgIHZhciBvO1xuICAgICAgICAgICAgICAgIG4gJiYgbi52ZXJib3NlICYmIChvID0ge1xuICAgICAgICAgICAgICAgICAgICB2aXNpdG9ySWQ6IG4udmlzaXRvcklkLFxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uSWQ6IG4uc2Vzc2lvbklkLFxuICAgICAgICAgICAgICAgICAgICBhbGxvd0Nvb2tpZXM6IG4uYWxsb3dDb29raWVzLFxuICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybUlkOiBuLnBsYXRmb3JtSWRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUsIG8sIHQpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIDtcbiAgICAgICAgbVtlXSA9IG47XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgby5sZW5ndGg7IGUrKylcbiAgICAgICAgICAgIG4uYXBwbHkobnVsbCwgW10uc2xpY2UuY2FsbChvW2VdKSk7XG4gICAgICAgIGZ1bmN0aW9uIHYoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGBQU2VjX19zdG9yZWZyb250X19hYl9fdGVzdF9fJHtlfVBTZWNfX3N0b3JlZnJvbnRfX2FiX190ZXN0YFxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG4oZSkge1xuICAgICAgICAgICAgaWYgKHQuaGFzT3duUHJvcGVydHkoZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRbZV0uYXBwbHkodCwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQ2FuJ3Qgc2VuZCBhY3Rpb25cIiwgZSlcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24geShlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciB0ID0gdihlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0odClcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIF8oKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShwLnBsYXRmb3JtSWQpXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBiKCkge1xuICAgICAgICAgICAgbGV0IGUgPSBNYXRoLmZsb29yKE1hdGgucG93KDEwLCA2KSAqIE1hdGgucmFuZG9tKCkpICsgXCJcIjtcbiAgICAgICAgICAgIGZvciAoZSA9IGUuc3Vic3RyaW5nKDAsIDYpOyBlLmxlbmd0aCA8IDY7IClcbiAgICAgICAgICAgICAgICBlID0gXCIwXCIgKyBlO1xuICAgICAgICAgICAgcmV0dXJuICtuZXcgRGF0ZSArIFwiXCIgKyBlXG4gICAgICAgIH1cbiAgICB9IGVsc2VcbiAgICAgICAgY29uc29sZS53YXJuKFwiZWNhLWRvbWFpbiBpcyBub3QgZGVmaW5lZFwiKVxufVxuKSh3aW5kb3cpO1xuZXhwb3J0IGRlZmF1bHQgd2luZG93OyJdLAogICJtYXBwaW5ncyI6ICJBQUFBO0FBQUEsQ0FDQyxPQUFLO0FBQ0YsTUFBSSxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLGNBQWMsTUFBTSxjQUFjLElBQUksRUFBRSxVQUFVLEVBQUUsUUFBUSwwQkFBMEIsRUFBRSxJQUFJLE9BQU8sT0FDN0gsSUFBSSxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUM7QUFDcEIsTUFBSSxJQUFJLFNBQVMsZUFBZSxhQUFhLFlBQVksS0FBSztBQUM5RCxNQUFJLEdBQUc7QUFrTUgsUUFBUyxJQUFULFNBQVdBLElB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WUFBWUYsRUFBQztBQUFBLE1BQzFEO0FBQ0EsZUFBUyxFQUFFQSxJQUFHO0FBQ1YsVUFBRSxtQkFBbUJBLEVBQUMsR0FDdEIsUUFBUUEsS0FBSSxFQUFFLElBQUlFLEdBQUUsWUFBWSxFQUFFLEVBQUUsV0FBV0YsRUFBQyxHQUNoREUsR0FBRSxhQUFhLENBQUNELEdBQUVDLEdBQUUsU0FBUyxLQUFLLEVBQUU7QUFBQSxNQUN4QztBQUNBLGVBQVMsRUFBRUYsSUFBRztBQUNWLFFBQUFFLEdBQUUsVUFBVUY7QUFBQSxNQUNoQjtBQUNBLGVBQVNDLEdBQUVELElBQUc7QUFDVixRQUFBQSxLQUFJQSxHQUFFLFVBQVUsR0FBR0EsR0FBRSxTQUFTLENBQUM7QUFDL0IsZUFBTyxPQUFPLEtBQUssSUFBSSxJQUFJQTtBQUFBLE1BQy9CO0FBQ0EsZUFBUyxJQUFJO0FBQ1QsVUFBRSxjQUFjLEdBQ2hCRSxHQUFFLFlBQVksRUFBRSxFQUFFLFdBQVcsRUFBRSxDQUFDO0FBQUEsTUFDcEM7QUFDQSxlQUFTLElBQUk7QUFDVCxVQUFFLGdCQUFnQixHQUNsQkEsR0FBRSxZQUFZLEVBQUUsRUFBRSxXQUFXLEVBQUUsQ0FBQztBQUFBLE1BQ3BDO0FBQ0EsZUFBUyxFQUFFRixJQUFHQyxJQUFHO0FBQ2IsWUFBSUEsS0FBSUEsTUFBSyxFQUFFLEdBQ2ZDLEdBQUU7QUFDRSxjQUFJO0FBQ0EsY0FBRSx3QkFBd0JGLEtBQUksTUFBTUMsRUFBQyxHQUNyQyxhQUFhLFFBQVFELElBQUdDLEVBQUM7QUFBQSxVQUM3QixTQUFTRCxJQUFHO0FBQ1IsY0FBRSxxQkFBcUJBLEVBQUM7QUFBQSxVQUM1QjtBQUNKLGVBQU9DO0FBQUEsTUFDWDtBQUNBLGVBQVMsRUFBRUQsSUFBRztBQUNWLFVBQUUsaUJBQWlCQSxFQUFDO0FBQ3BCLFlBQUk7QUFDQSx1QkFBYSxXQUFXQSxFQUFDO0FBQUEsUUFDN0IsU0FBU0EsSUFBRztBQUNSLFlBQUUsdUJBQXVCQSxFQUFDO0FBQUEsUUFDOUI7QUFBQSxNQUNKO0FBQ0EsZUFBUyxFQUFFQSxJQUFHQyxJQUFHO0FBQ2IsWUFBSUU7QUFDSixRQUFBRCxNQUFLQSxHQUFFLFlBQVlDLEtBQUk7QUFBQSxVQUNuQixXQUFXRCxHQUFFO0FBQUEsVUFDYixXQUFXQSxHQUFFO0FBQUEsVUFDYixjQUFjQSxHQUFFO0FBQUEsVUFDaEIsWUFBWUEsR0FBRTtBQUFBLFFBQ2xCLEdBQ0EsUUFBUSxJQUFJRixJQUFHRyxJQUFHRixFQUFDO0FBQUEsTUFDdkI7QUFBQSxJQUNKO0FBRUEsTUFBRSxDQUFDLElBQUk7QUFDUCxhQUFTRCxLQUFJLEdBQUdBLEtBQUksRUFBRSxRQUFRQTtBQUMxQixRQUFFLE1BQU0sTUFBTSxDQUFDLEVBQUUsTUFBTSxLQUFLLEVBQUVBLEVBQUMsQ0FBQyxDQUFDO0FBQUEsRUFnQ3pDO0FBQ0ksWUFBUSxLQUFLLDJCQUEyQjtBQUNoRCxHQUNFLE1BQU07QUFDUixlQUFlOyIsCiAgIm5hbWVzIjogWyJlIiwgInQiLCAibiIsICJvIl0KfQo=
